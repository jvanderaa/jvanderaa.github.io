
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Josh VanDeraa">
      
      
        <link rel="canonical" href="https://josh-v.com/archive/2020/page/2/">
      
      
        <link rel="prev" href="../../../2021/">
      
      
        <link rel="next" href="../../../2019/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.24">
    
    
      
        <title>2020 - Josh VanDeraa</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 12a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M6 13h8l-3.5 3.5 1.42 1.42L17.84 12l-5.92-5.92L10.5 7.5 14 11H6v2Z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-QCDLSTK9K6"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-QCDLSTK9K6",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-QCDLSTK9K6",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
   <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#2020" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Josh VanDeraa" class="md-header__button md-logo" aria-label="Josh VanDeraa" data-md-component="logo">
      
  <img src="../../../../assets/router.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Josh VanDeraa
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2020
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/jvanderaa/jvanderaa.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jvanderaa/jvanderaa.github.io
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  üè† Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../about/" class="md-tabs__link">
        
  
    
  
  üë§ About

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../book/" class="md-tabs__link">
        
  
    
  
  üìñ Book: OSS Net Mgmt

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../links/" class="md-tabs__link">
        
  
    
  
  üîó Links

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../2024/" class="md-tabs__link">
          
  
    
  
  üìö Posts

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../category/ansible/" class="md-tabs__link">
          
  
    
  
  üè∑Ô∏è Categories

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Josh VanDeraa" class="md-nav__button md-logo" aria-label="Josh VanDeraa" data-md-component="logo">
      
  <img src="../../../../assets/router.png" alt="logo">

    </a>
    Josh VanDeraa
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jvanderaa/jvanderaa.github.io" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jvanderaa/jvanderaa.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üè† Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üë§ About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../book/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üìñ Book: OSS Net Mgmt
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../links/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    üîó Links
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    üìö Posts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            üìö Posts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    2020
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#home-assistant-prometheus-exporting-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Home Assistant Prometheus Exporting Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2020-blog-update" class="md-nav__link">
    <span class="md-ellipsis">
      2020 Blog Update
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practicing-network-automation-with-gns3" class="md-nav__link">
    <span class="md-ellipsis">
      Practicing Network Automation with GNS3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-for-enterprise" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible for Enterprise
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-for-automation-environment-ansible-210" class="md-nav__link">
    <span class="md-ellipsis">
      Docker for Automation Environment - Ansible 2.10
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-apple-automator-to-open-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Using Apple Automator to Open Projects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-cisco-ios-user-module" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible Cisco IOS User Module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-cisco-ios_interfaces-module" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible Cisco ios_interfaces module
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    üè∑Ô∏è Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            üè∑Ô∏è Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ansible/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ansible
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/arista/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    arista
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/asa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asa
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/asa_og/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asa_og
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/automation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    automation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cisco/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cisco
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cisco_ios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cisco_ios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cisco_nxos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cisco_nxos
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cisco_wlc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cisco_wlc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/communications/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    communications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/debian/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    debian
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/devnet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    devnet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/documentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/earth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    earth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/eveng/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eveng
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/expert/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    expert
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/flask/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flask
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/golang/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    golang
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/golf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    golf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/graphql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    graphql
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/hashicorp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hashicorp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/homeassistant/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    homeassistant
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ios_interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ios_interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/juniper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    juniper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/meraki/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    meraki
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/nautobot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nautobot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/netbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    netbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/netdevops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    netdevops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/netmiko/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    netmiko
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/network-simulation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    network simulation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/network_design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    network_design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/networking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    networking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/nornir/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nornir
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/poetry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    poetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/productivity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    productivity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/programming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/prometheus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prometheus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/redux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    redux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/saving_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    saving_config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/slack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tags
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/vault/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vault
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/wan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wan
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#home-assistant-prometheus-exporting-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Home Assistant Prometheus Exporting Setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2020-blog-update" class="md-nav__link">
    <span class="md-ellipsis">
      2020 Blog Update
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#practicing-network-automation-with-gns3" class="md-nav__link">
    <span class="md-ellipsis">
      Practicing Network Automation with GNS3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-for-enterprise" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible for Enterprise
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-for-automation-environment-ansible-210" class="md-nav__link">
    <span class="md-ellipsis">
      Docker for Automation Environment - Ansible 2.10
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-apple-automator-to-open-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Using Apple Automator to Open Projects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-cisco-ios-user-module" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible Cisco IOS User Module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ansible-cisco-ios_interfaces-module" class="md-nav__link">
    <span class="md-ellipsis">
      Ansible Cisco ios_interfaces module
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="2020">2020<a class="headerlink" href="#2020" title="Permanent link">#</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-21 00:00:00">November 21, 2020</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="../../../../category/homeassistant/" class="md-meta__link">homeassistant</a>, 
              <a href="../../../../category/prometheus/" class="md-meta__link">prometheus</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="home-assistant-prometheus-exporting-setup"><a class="toclink" href="../../../../homeassistant-prometheus/">Home Assistant Prometheus Exporting Setup</a></h2>
<p>There does not appear to be a complete set of documentation pieces available for setting up Prometheus on the Home Assistant platform. This post will take you along on my journey of setting up the Home Assistant to get metrics from it. The link for the documentation is a good start at getting Prometheus installed. <a href="https://www.home-assistant.io/integrations/prometheus/">https://www.home-assistant.io/integrations/prometheus/</a></p>
<h3 id="starting-prometheus"><a class="toclink" href="../../../../homeassistant-prometheus/#starting-prometheus">Starting Prometheus</a></h3>
<ol>
<li>Edit your <code>configuration.yaml</code> file</li>
<li>Add in a key of <code>prometheus:</code> </li>
<li>Add in any parameters you may need, but just they key alone is enough to start the exporter</li>
</ol>
<p>Once you have started the exporter, I was still getting a 404 not found. So I did restart the Home Assistant.</p>
<h3 id="installation-of-prometheus-endpoint"><a class="toclink" href="../../../../homeassistant-prometheus/#installation-of-prometheus-endpoint">Installation of Prometheus Endpoint</a></h3>
<p>The first thing that is different from most of the times that I have used Prometheus is that this implementation puts the information behind an authorization page. This is not so bad, but it definitely threw me for a loop for a short bit. There are a few options that I looked at for getting past the authentication issue</p>
<h4 id="legacy-tokens"><a class="toclink" href="../../../../homeassistant-prometheus/#legacy-tokens">Legacy Tokens</a></h4>
<p>The first thing I looked at was the legacy tokens. But quickly moved beyond this as Legacy wording is key. It is going away in the future and since this is a new setup, I didn't want to use anything legacy.</p>
<h4 id="trusted-networks-authentication-providers"><a class="toclink" href="../../../../homeassistant-prometheus/#trusted-networks-authentication-providers">Trusted Networks &amp; Authentication Providers</a></h4>
<p>I started to take a look at <a href="https://www.home-assistant.io/docs/authentication/providers/">auth_providers</a> and specifically the Trusted Networks aspect. I would love to be able to see what the Prometheus HTTP page looks like. However, making changes to the authentication mechanisms seemed like overkill for what I was looking to do.</p>
<p>Continuing to look at the Prometheus example:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Example Prometheus scrape_configs entry</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;hass&#39;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60s</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="nt">metrics_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/prometheus</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="c1"># Legacy api password</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">      </span><span class="nt">api_password</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;PASSWORD&#39;</span><span class="p p-Indicator">]</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="c1"># Long-Lived Access Token</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="nt">bearer_token</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;your.longlived.token&#39;</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="nt">scheme</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;HOSTNAME:8123&#39;</span><span class="p p-Indicator">]</span>
</span></code></pre></div>
<p>I kept finding the comment of "Long-Lived Access Token". This seems ideal for what we would want in an API based application. </p>
<h4 id="long-lived-access-token"><a class="toclink" href="../../../../homeassistant-prometheus/#long-lived-access-token">Long Lived Access Token</a></h4>
<p>This seems like the ideal state to get into. Setting this token is outlined <a href="https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token">https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token</a>. To get at the profile page for your user:</p>
<ol>
<li>Select your username on the lower left</li>
<li>Scroll to the <strong>very</strong> bottom</li>
<li>Select Create Token</li>
<li>Save this token to your password manager ‚Üí It will go away from sight</li>
</ol>
<h3 id="setup-prometheus"><a class="toclink" href="../../../../homeassistant-prometheus/#setup-prometheus">Setup Prometheus</a></h3>
<p>The final configuration that I used for the Prometheus scraping was set:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;homeassistant&#39;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60s</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nt">metrics_path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/prometheus</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nt">bearer_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;token&gt;</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;192.0.2.10:8123&quot;</span>
</span></code></pre></div>
<p>Substitute "192.0.2.10" with the IP address/name of your home assistant host.</p>
<h3 id="verify-metrics"><a class="toclink" href="../../../../homeassistant-prometheus/#verify-metrics">Verify Metrics</a></h3>
<p>Once the scraping has been setup, go to your Prometheus end point, then search. My devices started showing up immediately with the measurement prefix of <code>hass</code> when there was nothing more specifically setup.</p>
<h3 id="summary"><a class="toclink" href="../../../../homeassistant-prometheus/#summary">Summary</a></h3>
<p>Gathering metrics about your Home Automation platform is a fun thing to do, and to continue to gather experience on how to work with the modern metrics tooling. Whether the database is Prometheus or InfluxDB or other option, this can be helpful. This walked through looking at a couple of options for setting up Prometheus. Then once Prometheus was setup on the Home Assistant side, went and setup the Prometheus scraping configuration. Finally how to verify that you are getting appropriate metrics ingested.  </p>
<p>Note that I look to have a post in the future on why Home Assistant, where I have installed Home Assistant (there is some thought on this), and perhaps some of my graphs that I have being stored in Grafana at this time. I also hope to go through and setup the same for an InfluxDB instance as well.  </p>
<p>Hope this has helped. Leave a comment or give a thumbs up or down!  </p>
<p>Josh</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-18 00:00:00">November 18, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="2020-blog-update"><a class="toclink" href="../../../../blog_update_v2/">2020 Blog Update</a></h2>
<p>I've changed a few things on the site. Sorry about that! URLs have changed. Over the past week or so I have been working through making some what originally were small updates to the blog, that turned into a little too much effort. I was hoping to add a little bit of polish to the site while keeping the content in place. Earlier in 2020, maybe even back in 2019 I had become aware of Hashnode from the posts of <a href="https://twitter.com/davidban77">David Flores - aka NetPanda</a> who is on the Hashnode side at <a href="https://davidban77.hashnode.dev/">https://davidban77.hashnode.dev/</a>. I liked many things that the blogging site has to offer. From a very quick up and running, to having a strong start of a
community.</p>
<h3 id="hashnode-trial"><a class="toclink" href="../../../../blog_update_v2/#hashnode-trial">Hashnode Trial</a></h3>
<p>I decided to move the blog to Hashnode as a let's get started. I found it is easy to move the site as they already supported Markdown, which is what I write my blogs in already. The only downside that I originally saw as that there were no line numberings on the code blocks. I can live without that, but I still did desire it. I added my domain name and made the necessary DNS updates and it started to work out.</p>
<h4 id="downsides-of-moving-to-hashnode"><a class="toclink" href="../../../../blog_update_v2/#downsides-of-moving-to-hashnode">Downsides of Moving to Hashnode</a></h4>
<p>In the process I found that my first downside was that I lost some of my search engine rankings. One of the more popular over time posts was now gone from the search list. This is better as now my posts with Network to Code and some more recent post updates are showing up at the top of the list. Just wanted to make sure that was known.  </p>
<p>An unexpected downside of the move was that Hashnode appeared to enable HSTS on the domain josh-v.com. The implications of this is that on my development hosts that get the domain extension josh-v.com are then also expecting to be HTTPS. And the browsers automatically forwarded to the HTTPS domain. So I just went ahead and moved them to a new domain. Nothing that I couldn't overcome, but it took a short bit to figure that out.</p>
<h3 id="move-away-from-hashnode"><a class="toclink" href="../../../../blog_update_v2/#move-away-from-hashnode">Move Away from Hashnode</a></h3>
<p>In the end I found that when my domain was moved over there was not a way to customize the RSS feed. I chose to move back for that reason. I also want to be able to have a little more control on my domain about which URLs are HTTPS and which ones are not. And there are some other implications for the future as well. I moved back to the GitLab Pages that was still in place. This migration was an easy undo action.</p>
<h3 id="hugo-evaluation"><a class="toclink" href="../../../../blog_update_v2/#hugo-evaluation">Hugo Evaluation</a></h3>
<p><a href="https://gohugo.io/">Hugo</a> has a tremendous upside to it as the static site generator platform. It is written in Go, which helps with its speed, and can help you work with GoLang learning. There is an awesome centralized theme gallery for you to view possible themes to apply, and their features/code. It is extremely flexible.  </p>
<p>The one thing that I could not get to work out right was the image sizes on the site. When I tested locally and on GitHub pages (note that my main site is hosted on GitLab pages) the images would not resize to match the article. I found several posts that indicated to make a shortcode and then call the image that way, however that didn't seem to resolve my issues. So after a couple of evenings of attempting to figure this out that is when I turned back to check into the Jekyll themes arena.</p>
<h3 id="jekyll-themes"><a class="toclink" href="../../../../blog_update_v2/#jekyll-themes">Jekyll Themes</a></h3>
<p>The one downside is there is not a great system for themes like Hugo has, but there were some theme galleries around. I decided first to take a look at <a href="https://github.com/mmistakes/minimal-mistakes">Minimal Mistakes</a> to see if there was something that I could do. And there was. There had been many updates to the theme, and it has had an extreme amount of flexibility and capabilities added on. I got the theme up and running and then tested out what my existing blog posts would look like. They looked terrific, and just what I was looking for. I had a few small tweaks to make. I also needed to update the GitLab CI process for the new theme version. This has been a pleasant experience thus far. The couple of downsides that I see are that I need to research how to add a copy button to the code snippets where I would like them. I can handle that. And then the deployment length has some added pieces due ot the Ruby install process. I can live with this for now and have some paths forward to take.  </p>
<p>I love the new layouts in it. I like the table of contents options that will be on most if not all of my posts. I have a few tweaks on some presentations which shouldn't be too hard.  </p>
<p>The only downside thus far to the move to the newer version (and maybe this was my fault from 2+ years ago) was that my posts now have new URLs. So if I was counting on someone bookmarking a post, these have now changed. I hope that these URLs will now remain in the future as they seem consistent on platforms from Hashnode, Hugo, and Jekyll now.  </p>
<p>So for now, I am staying on Jekyll. </p>
<h3 id="python-pelican"><a class="toclink" href="../../../../blog_update_v2/#python-pelican">Python - Pelican</a></h3>
<p>I'd love to look at moving this blog to being a Pelican theme. However, when I researched some of the features I was looking for they just didn't seem to have it yet. I know Python the best and can contribute at times, but now is not the time for me to be contributing to this. I have other priorities that I know I won't be able to tackle this type of adventure at this time. Maybe some point in the future.</p>
<h3 id="hashnode-good-platform"><a class="toclink" href="../../../../blog_update_v2/#hashnode-good-platform">Hashnode - Good Platform</a></h3>
<p>I did a small amount of negative points around Hashnode. There is a <strong>TON</strong> of good things about the platform. I do intend to keep an eye on how the platform moves on. I have opened several feature requests to hopefully get the last pieces that I would need to move over to them. There are several awesome things that are going on within the platform:</p>
<ul>
<li>Using modern techniques, writing within Markdown and providing a modern browser interface is good</li>
<li>Easy, no research needed features</li>
<li>Image resizing! This is why I didn't move to Hugo</li>
<li>Nice layouts pre-built</li>
</ul>
<p>I absolutely would look at Hashnode if I were starting out on my blog. There is a great amount of features available. I had the opportunity to stick with something else.</p>
<h3 id="tldr"><a class="toclink" href="../../../../blog_update_v2/#tldr">TLDR</a></h3>
<ol>
<li>Moved to Hashnode, had some quirks that I didn't like</li>
<li>Moved back to GitLab Pages!</li>
<li>Tried hugo, but couldn't get images to work right</li>
<li>Moved back to Jekyll with an updated theme and here we are!</li>
</ol>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-01 00:00:00">November 1, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="practicing-network-automation-with-gns3"><a class="toclink" href="../../../../practicing_with_gns3/">Practicing Network Automation with GNS3</a></h2>
<p>In an earlier post I took a look at how to setup EVE-NG to get access to virtualized network devices and topologies. This post is going to take a look at how to setup GNS3 systems to allow access.</p>
<p>In the overall topology that is a "home" network sits a device that supports a routing protocol, usually either OSPF or BGP. What is known to work at an inexpensive price point is the <a href="https://www.ui.com/edgemax/edgerouter-x/">Ubiquiti EdgeRouter X</a>. </p>
<h3 id="gns3-setup"><a class="toclink" href="../../../../practicing_with_gns3/#gns3-setup">GNS3 Setup</a></h3>
<p>This post is <strong>not</strong> a post on how to setup GNS3, it is meant to help you start to access devices. This tutorial is running a GNS3 VM on a remote host. Take a look at the <a href="https://docs.gns3.com/docs/">GNS3 docs</a> on how to install GNS3 specifically.</p>
<h3 id="gns3-configuration"><a class="toclink" href="../../../../practicing_with_gns3/#gns3-configuration">GNS3 Configuration</a></h3>
<p>The topology item used to create the connection to the production network is the device type of <strong>Cloud</strong>. Add a cloud with the general connection and the device will have connectivity to your local network.</p>
<p>Next setup a router (in this instance using a Cisco vIOS image - licensed item). Connect that device to the cloud that was added to the topology. In this particular setup, DHCP is being used. </p>
<p><img alt="Screen Shot 2020-11-01 at 11.38.05.png" src="https://cdn.hashnode.com/res/hashnode/image/upload/v1604252581798/7_f4xrkLs.png" /></p>
<h4 id="router-configuration"><a class="toclink" href="../../../../practicing_with_gns3/#router-configuration">Router Configuration</a></h4>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>rtr-edge#show<span class="w"> </span>run<span class="w"> </span>interface<span class="w"> </span>GigabitEthernet0/0
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>Building<span class="w"> </span>configuration...
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>Current<span class="w"> </span>configuration<span class="w"> </span>:<span class="w"> </span><span class="m">110</span><span class="w"> </span>bytes
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>!
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>interface<span class="w"> </span>GigabitEthernet0/0
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w"> </span>ip<span class="w"> </span>address<span class="w"> </span>dhcp
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w"> </span>duplex<span class="w"> </span>auto
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w"> </span>speed<span class="w"> </span>auto
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w"> </span>media-type<span class="w"> </span>rj45
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w"> </span>no<span class="w"> </span>cdp<span class="w"> </span><span class="nb">enable</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>end
</span></code></pre></div>
<p>With the device getting an address, the device also gets a floating default static route imported to match the DNS request:</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>rtr-edge#show<span class="w"> </span>ip<span class="w"> </span>route
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>Codes:<span class="w"> </span>L<span class="w"> </span>-<span class="w"> </span>local,<span class="w"> </span>C<span class="w"> </span>-<span class="w"> </span>connected,<span class="w"> </span>S<span class="w"> </span>-<span class="w"> </span>static,<span class="w"> </span>R<span class="w"> </span>-<span class="w"> </span>RIP,<span class="w"> </span>M<span class="w"> </span>-<span class="w"> </span>mobile,<span class="w"> </span>B<span class="w"> </span>-<span class="w"> </span>BGP
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">       </span>D<span class="w"> </span>-<span class="w"> </span>EIGRP,<span class="w"> </span>EX<span class="w"> </span>-<span class="w"> </span>EIGRP<span class="w"> </span>external,<span class="w"> </span>O<span class="w"> </span>-<span class="w"> </span>OSPF,<span class="w"> </span>IA<span class="w"> </span>-<span class="w"> </span>OSPF<span class="w"> </span>inter<span class="w"> </span>area<span class="w"> </span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">       </span>N1<span class="w"> </span>-<span class="w"> </span>OSPF<span class="w"> </span>NSSA<span class="w"> </span>external<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span>,<span class="w"> </span>N2<span class="w"> </span>-<span class="w"> </span>OSPF<span class="w"> </span>NSSA<span class="w"> </span>external<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">2</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">       </span>E1<span class="w"> </span>-<span class="w"> </span>OSPF<span class="w"> </span>external<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">1</span>,<span class="w"> </span>E2<span class="w"> </span>-<span class="w"> </span>OSPF<span class="w"> </span>external<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="m">2</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">       </span>i<span class="w"> </span>-<span class="w"> </span>IS-IS,<span class="w"> </span>su<span class="w"> </span>-<span class="w"> </span>IS-IS<span class="w"> </span>summary,<span class="w"> </span>L1<span class="w"> </span>-<span class="w"> </span>IS-IS<span class="w"> </span>level-1,<span class="w"> </span>L2<span class="w"> </span>-<span class="w"> </span>IS-IS<span class="w"> </span>level-2
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">       </span>ia<span class="w"> </span>-<span class="w"> </span>IS-IS<span class="w"> </span>inter<span class="w"> </span>area,<span class="w"> </span>*<span class="w"> </span>-<span class="w"> </span>candidate<span class="w"> </span>default,<span class="w"> </span>U<span class="w"> </span>-<span class="w"> </span>per-user<span class="w"> </span>static<span class="w"> </span>route
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">       </span>o<span class="w"> </span>-<span class="w"> </span>ODR,<span class="w"> </span>P<span class="w"> </span>-<span class="w"> </span>periodic<span class="w"> </span>downloaded<span class="w"> </span>static<span class="w"> </span>route,<span class="w"> </span>H<span class="w"> </span>-<span class="w"> </span>NHRP,<span class="w"> </span>l<span class="w"> </span>-<span class="w"> </span>LISP
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">       </span>a<span class="w"> </span>-<span class="w"> </span>application<span class="w"> </span>route
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">       </span>+<span class="w"> </span>-<span class="w"> </span>replicated<span class="w"> </span>route,<span class="w"> </span>%<span class="w"> </span>-<span class="w"> </span>next<span class="w"> </span>hop<span class="w"> </span>override,<span class="w"> </span>p<span class="w"> </span>-<span class="w"> </span>overrides<span class="w"> </span>from<span class="w"> </span>PfR
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>Gateway<span class="w"> </span>of<span class="w"> </span>last<span class="w"> </span>resort<span class="w"> </span>is<span class="w"> </span><span class="m">192</span>.0.2.1<span class="w"> </span>to<span class="w"> </span>network<span class="w"> </span><span class="m">0</span>.0.0.0
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>S*<span class="w">    </span><span class="m">0</span>.0.0.0/0<span class="w"> </span><span class="o">[</span><span class="m">254</span>/0<span class="o">]</span><span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.0.2.1
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">      </span><span class="m">192</span>.0.2.0/24<span class="w"> </span>is<span class="w"> </span>variably<span class="w"> </span>subnetted,<span class="w"> </span><span class="m">2</span><span class="w"> </span>subnets,<span class="w"> </span><span class="m">2</span><span class="w"> </span>masks
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>C<span class="w">        </span><span class="m">192</span>.0.2.0/24<span class="w"> </span>is<span class="w"> </span>directly<span class="w"> </span>connected,<span class="w"> </span>GigabitEthernet0/0
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>L<span class="w">        </span><span class="m">192</span>.0.2.163/32<span class="w"> </span>is<span class="w"> </span>directly<span class="w"> </span>connected,<span class="w"> </span>GigabitEthernet0/0
</span></code></pre></div>
<p>Verify that you have access to the Internet by using ICMP to test.</p>
<div class="language-shell highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>rtr-edge#ping<span class="w"> </span><span class="m">1</span>.1.1.1
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Type<span class="w"> </span>escape<span class="w"> </span>sequence<span class="w"> </span>to<span class="w"> </span>abort.
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Sending<span class="w"> </span><span class="m">5</span>,<span class="w"> </span><span class="m">100</span>-byte<span class="w"> </span>ICMP<span class="w"> </span>Echos<span class="w"> </span>to<span class="w"> </span><span class="m">1</span>.1.1.1,<span class="w"> </span>timeout<span class="w"> </span>is<span class="w"> </span><span class="m">2</span><span class="w"> </span>seconds:
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>!!!!!
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>Success<span class="w"> </span>rate<span class="w"> </span>is<span class="w"> </span><span class="m">100</span><span class="w"> </span>percent<span class="w"> </span><span class="o">(</span><span class="m">5</span>/5<span class="o">)</span>,<span class="w"> </span>round-trip<span class="w"> </span>min/avg/max<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">13</span>/16/18<span class="w"> </span>ms
</span></code></pre></div>
<h3 id="setup-automation"><a class="toclink" href="../../../../practicing_with_gns3/#setup-automation">Setup Automation</a></h3>
<p>By using OSPF you are able to setup networks and advertise them back into your "production"/"home" network. With the network being advertised you can then setup your hosts with addressing that would have access from the network.</p>
<p>It is recommended that you test SSH/API connectivity into the GNS3 environment manually.</p>
<h3 id="summary"><a class="toclink" href="../../../../practicing_with_gns3/#summary">Summary</a></h3>
<p>With the tools of <a href="https://gns3.com/">GNS3</a>, <a href="https://www.eve-ng.net/">EVE-NG</a>, <a href="https://learningnetworkstore.cisco.com/cisco-modeling-labs-personal/cisco-cml-personal">Cisco CML</a>, and <a href="https://github.com/plajjan/vrnetlab">VRNetLab</a> you have significant choice in looking at tools that will help you to level up your skills in Network Automation.</p>
<p>Hope that this may help you out in some way!</p>
<p><a href="https://ko-fi.com/P5P71HXHU"><img alt="ko-fi" src="https://www.ko-fi.com/img/githubbutton_sm.svg" /></a></p>
<p>Josh</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-08-11 00:00:00">August 11, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="ansible-for-enterprise"><a class="toclink" href="../../../../ansible_for_enterprise/">Ansible for Enterprise</a></h2>
<p>One of the appealing features that I have towards working with Ansible is that it is able to
automate components across the entire Enterprise IT stacks. Rather than having to stitch together
your network, server, and desktop automation tools, there is at least one automation tool that will
work with just about your entire IT stack. In this I will take a high level overview of some of the
features that are there for you to explore.</p>
<h3 id="ansible-for-network-automation"><a class="toclink" href="../../../../ansible_for_enterprise/#ansible-for-network-automation">Ansible for Network Automation</a></h3>
<p>The first area that I will be brief on is from the network side of things. I am a long time network
engineer and that is close to my heart.  </p>
<p>Ansible is agentless and uses SSH as it's communication path. That leads well to interacting with
some of the more legacy network devices. Ansible also supports using the newer tooling of APIs from
devices, so until all of your entire Enterprise IT infrastructure supports API calls for automation,
Ansible can definitely fit the bill.  </p>
<p>The other interesting shift in the modules for networking is the move towards helping with intent
based configuration. The newer modules being written by the Ansible team have an absolute intent
configuration to them. This being that you need to send through your entire defined state to the
modules, or else they will be seen as intended to have a blank configuration. The modules will then
configure the devices as such. To see more on that look at my
<a href="https://josh-v.com/blog/2020/01/26/ansible-cisco-ios-interfaces-module.html">post on the interfaces module</a>.</p>
<p>If you are running an OS in your network that is Linux based, then you are in luck as well! Continue
to the next section about Linux automation.</p>
<h3 id="ansible-for-linux-server-automation"><a class="toclink" href="../../../../ansible_for_enterprise/#ansible-for-linux-server-automation">Ansible for Linux Server Automation</a></h3>
<p>This is the original purpose of Ansible. It was built to automate Linux systems. Many of the core
modules that will be part of the Ansible base moving forward are modules that you use to manage
Linux systems. This is an absolute fit for the market. The times that I have written Ansible
Playbooks for Linux OS it has been a joy to work with and works very smoothly.</p>
<h3 id="ansible-for-docker"><a class="toclink" href="../../../../ansible_for_enterprise/#ansible-for-docker">Ansible for Docker</a></h3>
<p>Ansible is able to automate your Docker environment as well. With support for both Docker containers
and docker-compose functionality. This will help you through your life cycle of Docker containers.
Although it does not get to the level of what Kubernetes will do from an orchestration level without
some level of effort.</p>
<h3 id="ansible-for-windows"><a class="toclink" href="../../../../ansible_for_enterprise/#ansible-for-windows">Ansible for Windows</a></h3>
<p>Ansible for Windows is a thing! Although I do think it takes a little more effort to get off the
ground than even the network side. You need to enable WinRM on the Windows host for the
functionality to work. After that under the hood instead of using Python Ansible is leveraging
PowerShell code to interact with Windows OS. So yes, you can automate Windows devices.</p>
<h3 id="ansible-for-macos"><a class="toclink" href="../../../../ansible_for_enterprise/#ansible-for-macos">Ansible for MacOS</a></h3>
<p>Being a *nix operating system, you can manage your Mac deployment with Ansible. Now you just need
to make sure the hosts are online when executing. So there isn't an out of the box check in agent
within Ansible. That's what makes Ansible awesome for networking is that it is agentless. Take a
look at Ansible for your Macs.</p>
<h3 id="ansible-for-cloud"><a class="toclink" href="../../../../ansible_for_enterprise/#ansible-for-cloud">Ansible for Cloud</a></h3>
<p>I will need to find the link again, but Ansible is one of the largest percentage increase in tools
to manage your cloud environments. There are quite the number of modules available for the leading
public cloud (and private) providers. If there isn't a specific module, one characteristic of a
good cloud environment these days is the ability to have a REST API. With Ansible you can leverage
the URI module for this.  </p>
<p>On the cloud module front, take a look at the table below. This is the number of modules that there
are within Ansible for managing their cloud environment. In my opinion, that is quite a bit and can
get you what you need.</p>
<table>
<thead>
<tr>
<th>Cloud</th>
<th>Module Count</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS</td>
<td>45+</td>
</tr>
<tr>
<td>Azure</td>
<td>169</td>
</tr>
<tr>
<td>Oracle Cloud</td>
<td>30 ‚Äúservices‚Äù</td>
</tr>
<tr>
<td>Google</td>
<td>153</td>
</tr>
<tr>
<td>Digital Ocean</td>
<td>22</td>
</tr>
<tr>
<td>Rackspace</td>
<td>26</td>
</tr>
<tr>
<td>Avi Networks</td>
<td>65</td>
</tr>
<tr>
<td>VMWare</td>
<td>140+</td>
</tr>
</tbody>
</table>
<h3 id="downside-of-ansible"><a class="toclink" href="../../../../ansible_for_enterprise/#downside-of-ansible">Downside of Ansible</a></h3>
<p>The biggest downside to leveraging Ansible would be the timeliness of execution. If you are looking
for speed on execution, then Ansible would either need some tweaks (such as installing mitogen).  </p>
<p>When it comes to automation, in my book the first gain is not speed. Speed is a by product of not
having to do rework and to move verification into an automated state. The real gain is by having a
consistent environment. Then moving your operations into Playbooks, which many may have heard of a
"runbook" which defines the process. Now your process is defined into a system that actually does
something.</p>
<h3 id="summary"><a class="toclink" href="../../../../ansible_for_enterprise/#summary">Summary</a></h3>
<p>In my opinion Ansible is still a right tool for the job when it comes to automating both your
network environments, and your entire enterprise IT stack. I encourage you to take a look, evaluate
other options as well. I hope this summary may be helpful. Let me know your thoughts in the comments
or on Twitter/LinkedIn.</p>
<p>Josh</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-27 00:00:00">June 27, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              8 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="docker-for-automation-environment-ansible-210"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/">Docker for Automation Environment - Ansible 2.10</a></h2>
<p>Docker is a terrific solution for making a consistent working environment. It's been about a year or
so since I built my very first own Docker container. I had always known why you use a container, but
was always intimidated too much so to even get started. I am glad that I did get started and am off
on my journey of using Docker containers. Let me jump into the problem and why? Couple the recent
experiences with Docker, and the upcoming move to slim down Ansible and install Collections for
most Network Automation modules, I thought it would be a good thing to get a write up done.</p>
<h3 id="problem"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#problem">Problem</a></h3>
<p>From a Network Automation standpoint, there is much change still occurring in the tooling ecosystem.
First that January 1, 2020 marked the end of support for Python 2.7. Yet there are still many setups
that require Python 2.7.  </p>
<p>Upcoming Ansible is changing the behavior from a full batteries included for Network Automation
tooling, moving over to a base package where you install Collections on top of it. This is going to
be, in my opinion, a second driver for really digging into using containers for your enterprise
automation envrionment.</p>
<h3 id="why-is-it-a-solution"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#why-is-it-a-solution">Why is it a Solution?</a></h3>
<h4 id="ansible-experience"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#ansible-experience">Ansible Experience</a></h4>
<p>This is a solution because it helps that you do your development work within a container. When you
run the command <code>ansible-playbook</code> you are getting the <code>ansible-playbook</code> executable that is built
into the container image. If outside of a container, there are several things that could happen. You
may install some things with Python 2, could with Python 3, which version of Python 3? Which version
of Python does the executables associated with Ansible reference? There are several methods to get
multiple versions of Python to be executing on your system. Installing Ansible dependencies into the
wrong Python PIP can definitely hamper it.</p>
<h4 id="i-dont-use-ansible-why-then"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#i-dont-use-ansible-why-then">I Don't Use Ansible, Why Then?</a></h4>
<p>This is an answer still for both Ansible and Python a like. One, if you mess up an installation you
just rebuild the container image. Yes, it is shorter to just delete a virtual environment as well.
When you go to install the Python application into the customer environment, you get portability, as
you bring your own Python installation with the container. As long as the customer supports
containers it adds portability. No more differing sets of instructions. Just a simple, docker
command or update of a docker-compose file and away you go.  </p>
<h4 id="portability"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#portability">Portability</a></h4>
<p>One of the tenants of the <a href="https://www.12factor.net">12-factor app</a> for developing modern apps is to
ask the question if you could open source your project tomorrow. If developing in virtual
environments you will still need to have a setup instruction set that could miss something that you
just have in your environment. With a container you bring a blank OS to the table inside of the
container. You install explicitly everything you need to get the app up and running.</p>
<h4 id="rhel-vs-ubuntu-vs-macos-vs-any-other-linux-os"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#rhel-vs-ubuntu-vs-macos-vs-any-other-linux-os">RHEL vs Ubuntu vs MacOS vs Any Other Linux OS</a></h4>
<p>The next thing about containers if you are going to interact with a file system in any way is that
you get consistency for your app. No longer do you need to understand how to interact with MacOS
with this command, and CentOS is this command, and Ubuntu is this other command. You choose the base
OS image, and interact with it as such.</p>
<h3 id="getting-started"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#getting-started">Getting Started</a></h3>
<p>My methodology for getting started with Docker was to read some getting started guides, and adapt
them for my Network Automation flavor. I'm going to try to walk you along so you can learn from some
of the things I learned along the way, and improve upon them.  </p>
<p>I started off with installing Docker Desktop on my Mac. The best way to get started is to install
Docker onto your OS of choice. The installation guide is <a href="https://docs.docker.com/get-docker/">https://docs.docker.com/get-docker/</a>. There
is also a HomeBrew package available for installing Docker as well.  </p>
<h4 id="docker-labs-on-the-internet"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#docker-labs-on-the-internet">Docker Labs on the Internet</a></h4>
<p>There are several resources available on the Internet for you to get experience with Docker.</p>
<ul>
<li><a href="https://developer.cisco.com/learning/lab/docker-101/step/1">Cisco DevNet Learning Labs</a></li>
<li><a href="https://labs.play-with-docker.com/">Play with Docker Labs</a> </li>
</ul>
<p>I encourage you to take a look at these if you do not want to get started on your own in your own
machine. The following examples will be done on your local machine.</p>
<h4 id="writing-a-dockerfile"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#writing-a-dockerfile">Writing A Dockerfile</a></h4>
<p>A Dockerfile is the set of instructions of how to build your container. So if you want to follow
along, create a directory anywhere that is accessible via command line called <code>docker_test</code>. Take
the following and paste it into a file called <code>Dockerfile</code>.  </p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>FROM<span class="w"> </span>python:3.8.3-slim-buster
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>RUN<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>sshpass<span class="w"> </span>vim<span class="w"> </span>-y
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>COPY<span class="w"> </span>.<span class="w"> </span>/local
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>WORKDIR<span class="w"> </span>/local
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>RUN<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>RUN<span class="w"> </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.yml
</span></code></pre></div>
<p>What this is doing:</p>
<table>
<thead>
<tr>
<th>Line Number</th>
<th>Outline</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Selecting the base image, this can be found on <a href="https://hub.docker.com">https://hub.docker.com</a>, searching Python</td>
</tr>
<tr>
<td>3</td>
<td>Installing <code>sshpass</code> and <code>vim</code> via apt. Updating the apt repo list first. Being a slim image, VIM is not pre-installed</td>
</tr>
<tr>
<td>5</td>
<td>Copies everything in the local directory into a directory /local</td>
</tr>
<tr>
<td>6</td>
<td>Changes the working directory, similar to <code>cd</code> in many OSes</td>
</tr>
<tr>
<td>8</td>
<td>Installs Python packages from the local <code>requirements.txt</code> file that was copied on line 5</td>
</tr>
<tr>
<td>9</td>
<td>Uses <code>ansible-galaxy</code> to install Galaxy collections from the local <code>requirements.yml</code> file</td>
</tr>
</tbody>
</table>
<p>To have this work right, lets use this as an opportunity to test out installing the new version of
Ansible into a container, by pip installing <code>ansible-base</code>.  </p>
<p>In order to build this container, you will need to have a requirements file ready to go for both
Python and Ansible Galaxy. So to this effort, here are those two files with a few packages:</p>
<h5 id="requirementstxt"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#requirementstxt">requirements.txt</a></h5>
<div class="language-toml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">ansible-base</span>
</span></code></pre></div></td></tr></table></div>
<p>The only Python package going to install this for is <code>ansible-base</code> which will install the current
beta versions of Ansible Base 2.10.</p>
<h5 id="requirementsyml"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#requirementsyml">requirements.yml</a></h5>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nn">---</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="c1"># Collection Installations</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nt">collections</span><span class="p">:</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco.asa</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
</span></code></pre></div>
<p>This has a few more keys to the requirements.yml file that Ansible Galaxy will install with. The YML
file first has a key of <code>collections</code>. This is because you can use the file to install both roles
and collections, not just collections. Here this will install the 1.0.0 release of the Ansible
modules for the Cisco ASA platform. You will likely need to add additional roles to here. To get the
name you leverage <a href="https://galaxy.ansible.com">https://galaxy.ansible.com</a> to search and find the modules that you would install.</p>
<h3 id="helper"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#helper">Helper</a></h3>
<p>The last piece I'd like to provide some info on as well is a helper file. Many of the *nix systems
have Make available to them. If unable to use Make on your filesystem, I will suggest to take a look
at the Python package <a href="http://www.pyinvoke.org/">invoke</a>. Invoke does have more flexibility than
make as it is written in Python, but for this demo I want to use Make so you can see the command
line commands that are used.  </p>
<p>The arguments for Make are made available by defining information in a <code>Makefile</code>. Here is the
Makefile that I will be using for this:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nv">IMG_NAME</span><span class="o">=</span>jvanderaa/network_automation
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nv">IMG_VERSION</span><span class="o">=</span><span class="m">2</span>.0-rc2
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>.DEFAULT_GOAL<span class="w"> </span>:<span class="o">=</span><span class="w"> </span>cli
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>.PHONY:<span class="w"> </span>build
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>build:
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span><span class="k">$(</span>IMG_NAME<span class="k">)</span>:<span class="k">$(</span>IMG_VERSION<span class="k">)</span><span class="w"> </span>.<span class="w"> </span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>.PHONY:<span class="w"> </span>cli
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>cli:
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">    </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">        </span>-v<span class="w"> </span><span class="k">$(</span>shell<span class="w"> </span><span class="nb">pwd</span><span class="k">)</span>:/local<span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">        </span>-w<span class="w"> </span>/local<span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">        </span><span class="k">$(</span>IMG_NAME<span class="k">)</span>:<span class="k">$(</span>IMG_VERSION<span class="k">)</span><span class="w"> </span>bash
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Line Number</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Defining a variable for image name, here <code>jvanderaa/network_automation</code></td>
</tr>
<tr>
<td>2</td>
<td>Defining a variable for IMG_VERSION so you can version your Docker containers</td>
</tr>
<tr>
<td>3</td>
<td>Setting a default goal so you can just type make and that is what will be done</td>
</tr>
<tr>
<td>5</td>
<td>.PHONY is saying that this is a phony file that is upcoming. It is best practice to include but not required</td>
</tr>
<tr>
<td>6</td>
<td>The key build: is what will be executed with the <code>make build</code> command</td>
</tr>
<tr>
<td>7</td>
<td>The actual command, it is <strong>tabbed</strong> in. You <strong>MUST NOT</strong> use spaces and <strong>MUST</strong> use tabs with Make</td>
</tr>
<tr>
<td>9</td>
<td>Definition of .PHONY for CLI</td>
</tr>
<tr>
<td>10</td>
<td>Defining a key of cli for <code>make cli</code> or just <code>make</code> due to the default goal defined</td>
</tr>
<tr>
<td>11</td>
<td>Start of the Docker run command, which includes mapping the local directory into the container directory so you can make live updates, changing the working directory, and launching bash</td>
</tr>
</tbody>
</table>
<h3 id="building-the-container"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#building-the-container">Building The Container</a></h3>
<p>First in my container image list I have no containers (I just pruned them all, and they are now all
deleted with the command <code>docker system prune -a</code>):</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a>$<span class="w"> </span>docker<span class="w"> </span>image<span class="w"> </span>ls<span class="w">       </span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2"></a>REPOSITORY<span class="w">          </span>TAG<span class="w">                 </span>IMAGE<span class="w"> </span>ID<span class="w">            </span>CREATED<span class="w">             </span>SIZE
</span></code></pre></div></td></tr></table></div>
<p>With no containers, I execute the command from the <code>Makefile</code> of <code>make build</code>. This will download
all of the layers, run the apt installations, pip install, and galaxy install. The output is below
with many of the lines removed.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span>
<span class="normal"><a href="#__codelineno-12-23">23</a></span>
<span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span>
<span class="normal"><a href="#__codelineno-12-28">28</a></span>
<span class="normal"><a href="#__codelineno-12-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>jvanderaa/network_automation:2.0-rc2<span class="w"> </span>.<span class="w"> </span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a>Sending<span class="w"> </span>build<span class="w"> </span>context<span class="w"> </span>to<span class="w"> </span>Docker<span class="w"> </span>daemon<span class="w">   </span><span class="m">5</span>.12kB
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a>Step<span class="w"> </span><span class="m">1</span>/6<span class="w"> </span>:<span class="w"> </span>FROM<span class="w"> </span>python:3.8.3-slim-buster
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="m">3</span>.8.3-slim-buster:<span class="w"> </span>Pulling<span class="w"> </span>from<span class="w"> </span>library/python
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a>8559a31e96f4:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a>62e60f3ef11e:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a>93c8ae153782:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a>ea222f757df7:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a>e97d3933bbbe:<span class="w"> </span>Pull<span class="w"> </span><span class="nb">complete</span><span class="w"> </span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a>Digest:<span class="w"> </span>sha256:938fd520a888e9dbac3de374b8ba495cc50fe96440030264a40f733052001895
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11"></a>Status:<span class="w"> </span>Downloaded<span class="w"> </span>newer<span class="w"> </span>image<span class="w"> </span><span class="k">for</span><span class="w"> </span>python:3.8.3-slim-buster
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w"> </span>---&gt;<span class="w"> </span>9d84edf35a0a
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13"></a>Step<span class="w"> </span><span class="m">2</span>/6<span class="w"> </span>:<span class="w"> </span>RUN<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>sshpass<span class="w"> </span>vim<span class="w"> </span>-y
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w"> </span>---&gt;<span class="w"> </span>Running<span class="w"> </span><span class="k">in</span><span class="w"> </span>66e37abb454a
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15"></a>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16"></a>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="o">[</span><span class="w"> </span>I<span class="w"> </span>REMOVED<span class="w"> </span>A<span class="w"> </span>BUNCH<span class="w"> </span>OF<span class="w"> </span>LINES<span class="w"> </span>HERE<span class="o">]</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18"></a>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19"></a>Step<span class="w"> </span><span class="m">6</span>/6<span class="w"> </span>:<span class="w"> </span>RUN<span class="w"> </span>ansible-galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.yml
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20"></a><span class="w"> </span>---&gt;<span class="w"> </span>Running<span class="w"> </span><span class="k">in</span><span class="w"> </span>94ca0bb3f3c9
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21"></a>Starting<span class="w"> </span>galaxy<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>process
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22"></a>Process<span class="w"> </span>install<span class="w"> </span>dependency<span class="w"> </span>map
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23"></a>Starting<span class="w"> </span>collection<span class="w"> </span>install<span class="w"> </span>process
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24"></a>Installing<span class="w"> </span><span class="s1">&#39;cisco.asa:1.0.0&#39;</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;/root/.ansible/collections/ansible_collections/cisco/asa&#39;</span>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25"></a>Installing<span class="w"> </span><span class="s1">&#39;ansible.netcommon:1.0.0&#39;</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;/root/.ansible/collections/ansible_collections/ansible/netcommon&#39;</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26"></a>Removing<span class="w"> </span>intermediate<span class="w"> </span>container<span class="w"> </span>94ca0bb3f3c9
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27"></a><span class="w"> </span>---&gt;<span class="w"> </span>0805ddb1719f
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28"></a>Successfully<span class="w"> </span>built<span class="w"> </span>0805ddb1719f
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29"></a>Successfully<span class="w"> </span>tagged<span class="w"> </span>jvanderaa/network_automation:2.0-rc2
</span></code></pre></div></td></tr></table></div>
<p>If you have followed along, congratulations, you have created your first Docker Image. This is what
will be used to create additional containers, which are a copy of the image, but a whole separate
container.  </p>
<p>Because of the tags, I prefer to use the <code>Makefile</code> to execute my containers as well. Now I just go
to the command line within the container by issuing <code>make cli</code> command. This will then take me to
the root user prompt of my conatiner.</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="l l-Scalar l-Scalar-Plain">$ make cli</span><span class="w">  </span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="l l-Scalar l-Scalar-Plain">docker run -it \</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">-v /Users/joshv/projects/docker_test:/local \</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">-w /local \</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">jvanderaa/network_automation:2.0-rc2 bash</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="l l-Scalar l-Scalar-Plain">root@58a4ea071203:/local# ansible-galaxy collection list</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="l l-Scalar l-Scalar-Plain"># /root/.ansible/collections/ansible_collections</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="l l-Scalar l-Scalar-Plain">Collection        Version</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="l l-Scalar l-Scalar-Plain">----------------- -------</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="l l-Scalar l-Scalar-Plain">ansible.netcommon 1.0.0</span><span class="w">  </span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="l l-Scalar l-Scalar-Plain">cisco.asa         1.0.0</span><span class="w">  </span>
</span></code></pre></div></td></tr></table></div>
<p>Inside of the container I execute the command <code>ansible-galaxy collection list</code>. This now shows me
that there are two collections installed:</p>
<ul>
<li>ansible.netcommon</li>
<li>cisco.asa</li>
</ul>
<h3 id="summary"><a class="toclink" href="../../../../docker_for_automation_environment_ansible_210/#summary">Summary</a></h3>
<p>With the container built, and a Dockerfile in place. I can now upload the Dockerfile along with the
rest of the project file to Git. This coupled with the Makefile will help to build any system
quickly. No more trying to find a place to host the Docker image (like Docker Hub), how to install
into the proper Python executable any modules that may be needed (like pandevice for PANOS modules)
or other SDKs that are helpers to the Ansible Collections being created.  </p>
<p>Hopefully this has been helpful. Take a look at the links!</p>
<p>Thanks,</p>
<p>-Josh</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-06-21 00:00:00">June 21, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="using-apple-automator-to-open-projects"><a class="toclink" href="../../../../apple_automator/">Using Apple Automator to Open Projects</a></h2>
<p>Today I'm going to walk through the newest part of my personal workflow for working with projects.
Straight to the point, this is going to be using Apple Automator to quickly open your project that
you wish to work on within VS Code, and presumably PyCharm as well.  </p>
<h3 id="problem"><a class="toclink" href="../../../../apple_automator/#problem">Problem</a></h3>
<p>So what is the problem that I'm trying to solve? I am one that generally likes the workspace concept
within VS Code, but I don't like having to maintain workspace files. I have found them a little
difficult to maintain and keep organized. To that end I have found that there is an option to
install VS Code shortcut into your OS path from the command pallet (cmd-P), and <code>path</code>.</p>
<p><img alt="VS Code Path" src="/images/2020/vscode-path.png" /></p>
<p>Once this is installed, you can issue at a terminal (or iTerm2) prompt the command <code>code .</code> and this
will bring up VS Code from the folder that you are currently working on.  </p>
<p>This sounds great, what is the problem? Well, I tend to open a lot of iTerm2 tabs just to open up
and go into VS Code. While working in VS Code, I then use the terminal that is baked into VS Code as
my terminal. So I have a window that is open unnecessarily.</p>
<h3 id="my-solution-apple-script-and-automator"><a class="toclink" href="../../../../apple_automator/#my-solution-apple-script-and-automator">My Solution - Apple Script and Automator</a></h3>
<p>So I was reminded about Apple Automator for some particular reason and I thought this would be a
great solution to opening VS Code directly to my folder that I want to work on and be able to close
VS Code windows whenever I was done working in a folder. So for me I use a specific directory on my
Mac to have all of my projects in them. This is a typical directory structure:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>projects
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>‚îú‚îÄ‚îÄ<span class="w"> </span>project1
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>‚îú‚îÄ‚îÄ<span class="w"> </span>project2
</span></code></pre></div>
<h4 id="automator-flow"><a class="toclink" href="../../../../apple_automator/#automator-flow">Automator Flow</a></h4>
<p>The flow is going to have a prompt come to the top when a command shortcut is executed. So -&gt;:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>command-shortcut<span class="w"> </span>-&gt;<span class="w"> </span>Select<span class="w"> </span>project<span class="w"> </span>-&gt;<span class="w"> </span>Open<span class="w"> </span>VS<span class="w"> </span>Code
</span></code></pre></div>
<h4 id="start-a-new-quick-action"><a class="toclink" href="../../../../apple_automator/#start-a-new-quick-action">Start a New Quick Action</a></h4>
<p>When creating a new document in your Automator, make sure to select the type as <strong>Quick Action</strong>.
This type is needed in order to use the Keyboard shortcut later.</p>
<h4 id="first-step-run-applescript"><a class="toclink" href="../../../../apple_automator/#first-step-run-applescript">First Step: Run AppleScript</a></h4>
<p>I looked at a couple of options here to get the prompt to display. From what I could tell there was
options in both AppleScript and JavaScript. I choose to stick with AppleScript in the current
iteration for ease of access to the file system. I will have to do additional research, but that
would be for a learning thing, not necessarily for productivity gains. I worked through a few links
and eventually came up with the following AppleScript:</p>
<div class="language-applescript highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">on</span> <span class="nb">run</span> <span class="p">{</span><span class="nv">input</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">}</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>    <span class="c"># Define the folder that is being used as project directory. This is the only thing that needs to be set</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="k">set</span> <span class="nv">projectFolder</span> <span class="k">to</span> <span class="s2">&quot;/Users/joshv/projects/&quot;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="c"># Use the finder application to get the list of all the folders inside of the folder</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;Finder&quot;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>        <span class="k">set</span> <span class="nv">fileList</span> <span class="k">to</span> <span class="k">get</span> <span class="na">name</span> <span class="k">of</span> <span class="nv">folders</span> <span class="k">of</span> <span class="nv">folder</span> <span class="p">(</span><span class="nv">projectFolder</span> <span class="k">as</span> <span class="nv">POSIX</span> <span class="nv">file</span><span class="p">)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    <span class="k">end</span> <span class="k">tell</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="c"># Create a prompt</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>    <span class="nb">choose from list</span> <span class="nv">fileList</span> <span class="nv">with</span> <span class="na">prompt</span> <span class="s2">&quot;Which project?&quot;</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    <span class="c"># Create a string of projectFolder with result of response</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>    <span class="k">set</span> <span class="nv">resultString</span> <span class="k">to</span> <span class="nv">projectFolder</span> <span class="o">&amp;</span> <span class="no">result</span> <span class="k">as </span><span class="nc">string</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>    <span class="c"># Return the path</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>    <span class="no">return</span> <span class="nb">the</span> <span class="nv">resultString</span> <span class="k">as </span><span class="nc">string</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="k">end</span> <span class="nb">run</span>
</span></code></pre></div>
<p>The only parameter that needs to be changed is the path to the directory on the third line, to match
what is your own project directory.</p>
<h4 id="second-step-run-shell-script"><a class="toclink" href="../../../../apple_automator/#second-step-run-shell-script">Second Step: Run Shell Script</a></h4>
<p>I then took the easy way out at the moment to execute an application. I will have to work to add
this all into one AppleScript or JavaScript execution in the future, but for now I know this works.
It is a short command, first I needed to find out where the <code>code</code> application that was mentioned
above is stored. So I did the command <code>which code</code> to get my path to the code shortcut. The final
result for me is:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>/usr/local/bin/code<span class="w"> </span><span class="nv">$1</span>
</span></code></pre></div>
<p>This takes an argument that is passed in from the AppleScript and passes it into the shell script.
The next change I needed to do on the Run Shell Script module of Automator was to set
<strong>Pass input</strong> to <em>as arguments</em> to pass it in as an argument.  </p>
<p>This now looks like the following from an Automator application:  </p>
<p><img alt="Automator" src="/images/2020/automator-complete.png" /></p>
<h4 id="keyboard-shortcuts"><a class="toclink" href="../../../../apple_automator/#keyboard-shortcuts">Keyboard Shortcuts</a></h4>
<p>Last thing to do is to assign a keyboard shortcut to your automation.</p>
<ol>
<li>Open Keyboard preferences</li>
<li>Select <strong>Shortcuts</strong></li>
<li>Select <em>Services</em> on the left</li>
<li>Scroll to the section <em>General</em></li>
<li>Find the name of your document that you created in Automator</li>
<li>Assign a keyboard shortcut, I'm using <code>CMD-Shift-'</code> for mine</li>
</ol>
<p><img alt="Shortcut" src="/images/2020/shortcuts.png" />  </p>
<p>Now when I select the keyboard shortcut, I get a visual prompt of the folders in the project folder
specified. And when I select the project and <strong>OK</strong> I am then taken to either a new VS Code window
based in that directory or the already opened VS Code window for that project folder.  </p>
<h3 id="summary"><a class="toclink" href="../../../../apple_automator/#summary">Summary</a></h3>
<p>Not all automation tools have to be Python, Ansible, or other modern language. You can use tools
that are provided that may feel old to help you in your every day work. Hopefully this comes in
handy for you as well! Let me know. In the end, if this helps great, otherwise this is good
documentation for myself if needed in the future!  </p>
<p>Thanks,</p>
<p>-Josh</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-03-14 00:00:00">March 14, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              8 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="ansible-cisco-ios-user-module"><a class="toclink" href="../../../../ansible-cisco-ios-user/">Ansible Cisco IOS User Module</a></h2>
<p>In this post I will be taking a look at some of the usability setup of managing Cisco IOS devices
with the <a href="https://docs.ansible.com/ansible/latest/modules/ios_config_module.html">Ansible Cisco IOS User Module</a>.
This can be very helpful for setting up managed user accounts on systems, or the backup user
accounts when you have TACACS or RADIUS setup.</p>
<p>The module documentation overall looks complete from what I have done for user account management on
devices in the past. There are a couple of interesting parameters available, that I may not get to
completely on this post. There is support for aggregate, meaning that you can generate the
configuration for multiple user accounts and pass it in as one. You can set a password in clear text
that gets encrypted when on the device, or you can set a hashed_password with the type of hash and
its corresponding value. And as expected with a module for setting user accounts you can also set
the privilege level for which the user account uses.</p>
<h3 id="ssh-before-setting-up-ssh-keys"><a class="toclink" href="../../../../ansible-cisco-ios-user/#ssh-before-setting-up-ssh-keys">SSH Before Setting Up SSH Keys</a></h3>
<p>You have probably seen this before, but for completeness sake I did get the output of the SSH login
banner. This has the default lab setup on the device. So we do get a banner, but I'm getting
prompted for a Password as well.</p>
<div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a>ssh<span class="w"> </span>rtr-1
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a>The<span class="w"> </span>authenticity<span class="w"> </span>of<span class="w"> </span>host<span class="w"> </span><span class="s1">&#39;rtr-1 (10.250.0.167)&#39;</span><span class="w"> </span>can<span class="s1">&#39;t be established.</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="s1">RSA key fingerprint is SHA256:iyEgRBFlLhkW+Z2OOYWPvrjuzhTVY9wULmoHkWYgbrw.</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="s1">Are you sure you want to continue connecting (yes/no)? yes</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="s1">Warning: Permanently added &#39;</span>rtr-1<span class="s1">&#39; (RSA) to the list of known hosts.</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="s1">Warning: the RSA host key for &#39;</span>rtr-1<span class="s1">&#39; differs from the key for the IP address &#39;</span><span class="m">10</span>.250.0.167<span class="s1">&#39;</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="s1">Offending key for IP in /Users/joshv/.ssh/known_hosts:170</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="s1">Are you sure you want to continue connecting (yes/no)? yes</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9"></a>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10"></a><span class="s1">**************************************************************************</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="s1">* IOSv is strictly limited to use for evaluation, demonstration and IOS  *</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="s1">* education. IOSv is provided as-is and is not supported by Cisco&#39;</span>s<span class="w">      </span>*
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13"></a>*<span class="w"> </span>Technical<span class="w"> </span>Advisory<span class="w"> </span>Center.<span class="w"> </span>Any<span class="w"> </span>use<span class="w"> </span>or<span class="w"> </span>disclosure,<span class="w"> </span><span class="k">in</span><span class="w"> </span>whole<span class="w"> </span>or<span class="w"> </span><span class="k">in</span><span class="w"> </span>part,<span class="w"> </span>*
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14"></a>*<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>IOSv<span class="w"> </span>Software<span class="w"> </span>or<span class="w"> </span>Documentation<span class="w"> </span>to<span class="w"> </span>any<span class="w"> </span>third<span class="w"> </span>party<span class="w"> </span><span class="k">for</span><span class="w"> </span>any<span class="w">       </span>*
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15"></a>*<span class="w"> </span>purposes<span class="w"> </span>is<span class="w"> </span>expressly<span class="w"> </span>prohibited<span class="w"> </span>except<span class="w"> </span>as<span class="w"> </span>otherwise<span class="w"> </span>authorized<span class="w"> </span>by<span class="w">     </span>*
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16"></a>*<span class="w"> </span>Cisco<span class="w"> </span><span class="k">in</span><span class="w"> </span>writing.<span class="w">                                                      </span>*
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17"></a>**************************************************************************Password:
</span></code></pre></div></td></tr></table></div>
<h3 id="adding-ssh-key-users"><a class="toclink" href="../../../../ansible-cisco-ios-user/#adding-ssh-key-users">Adding SSH Key Users</a></h3>
<p>Copying from the example on the module definition, I went ahead and created a playbook that will
create an account on the same device but with my local computer account. Here is the playbook:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nn">---</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PLAY</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">WORKING</span><span class="nv"> </span><span class="s">WITH</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">USER</span><span class="nv"> </span><span class="s">MODULE&quot;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco_routers</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">network_cli</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">Add</span><span class="nv"> </span><span class="s">local</span><span class="nv"> </span><span class="s">username</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">SSH</span><span class="nv"> </span><span class="s">Key&quot;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">      </span><span class="nt">ios_user</span><span class="p">:</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joshv</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">        </span><span class="nt">nopassword</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">        </span><span class="nt">sshkey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;file&#39;,</span><span class="nv"> </span><span class="s">&#39;~/.ssh/id_rsa.pub&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FINAL</span><span class="nv"> </span><span class="s">TASK:</span><span class="nv"> </span><span class="s">Save</span><span class="nv"> </span><span class="s">Config&quot;</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">      </span><span class="nt">ios_config</span><span class="p">:</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">        </span><span class="nt">save_when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
</span></code></pre></div>
<p>It is a single play playbook, with 2 tasks. Task 1 will add the local id_rsa public key to the IOS
device. The final task is a play to save the configuration.</p>
<div class="language-shell highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span>
<span class="normal"><a href="#__codelineno-12-23">23</a></span>
<span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span>
<span class="normal"><a href="#__codelineno-12-28">28</a></span>
<span class="normal"><a href="#__codelineno-12-29">29</a></span>
<span class="normal"><a href="#__codelineno-12-30">30</a></span>
<span class="normal"><a href="#__codelineno-12-31">31</a></span>
<span class="normal"><a href="#__codelineno-12-32">32</a></span>
<span class="normal"><a href="#__codelineno-12-33">33</a></span>
<span class="normal"><a href="#__codelineno-12-34">34</a></span>
<span class="normal"><a href="#__codelineno-12-35">35</a></span>
<span class="normal"><a href="#__codelineno-12-36">36</a></span>
<span class="normal"><a href="#__codelineno-12-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a>ansible-playbook<span class="w"> </span>working_with_ios_user-1.yml
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a>PLAY<span class="w"> </span><span class="o">[</span>PLAY<span class="w"> </span><span class="m">1</span>:<span class="w"> </span>WORKING<span class="w"> </span>WITH<span class="w"> </span>IOS<span class="w"> </span>USER<span class="w"> </span>MODULE<span class="o">]</span><span class="w"> </span>****************************************************
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4"></a>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5"></a>TASK<span class="w"> </span><span class="o">[</span>TASK<span class="w"> </span><span class="m">1</span>:<span class="w"> </span>Add<span class="w"> </span><span class="nb">local</span><span class="w"> </span>username<span class="w"> </span>with<span class="w"> </span>SSH<span class="w"> </span>Key<span class="o">]</span><span class="w"> </span>*************************************************
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="o">[</span>WARNING<span class="o">]</span>:<span class="w"> </span>Module<span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span><span class="nb">set</span><span class="w"> </span>no_log<span class="w"> </span><span class="k">for</span><span class="w"> </span>update_password
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="o">[</span>WARNING<span class="o">]</span>:<span class="w"> </span>Module<span class="w"> </span>did<span class="w"> </span>not<span class="w"> </span><span class="nb">set</span><span class="w"> </span>no_log<span class="w"> </span><span class="k">for</span><span class="w"> </span>password_type
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8"></a>changed:<span class="w"> </span><span class="o">[</span>r1<span class="o">]</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9"></a>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10"></a>TASK<span class="w"> </span><span class="o">[</span>debug<span class="o">]</span><span class="w"> </span>***********************************************************************************
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11"></a>ok:<span class="w"> </span><span class="o">[</span>r1<span class="o">]</span><span class="w"> </span><span class="o">=</span>&gt;<span class="w"> </span><span class="o">{</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12"></a><span class="w">    </span><span class="s2">&quot;msg&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="w">        </span><span class="s2">&quot;ansible_facts&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="w">            </span><span class="s2">&quot;discovered_interpreter_python&quot;</span>:<span class="w"> </span><span class="s2">&quot;/usr/bin/python&quot;</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="w">        </span><span class="o">}</span>,
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="w">        </span><span class="s2">&quot;changed&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="w">        </span><span class="s2">&quot;commands&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="w">            </span><span class="s2">&quot;ip ssh pubkey-chain&quot;</span>,
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="w">            </span><span class="s2">&quot;username joshv&quot;</span>,
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20"></a><span class="w">            </span><span class="s2">&quot;key-hash ssh-rsa &lt;hash_masked&gt; joshv@&lt;adevice&gt;&quot;</span>,
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21"></a><span class="w">            </span><span class="s2">&quot;exit&quot;</span>,
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22"></a><span class="w">            </span><span class="s2">&quot;exit&quot;</span>,
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23"></a><span class="w">            </span><span class="s2">&quot;username joshv nopassword&quot;</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24"></a><span class="w">        </span><span class="o">]</span>,
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25"></a><span class="w">        </span><span class="s2">&quot;failed&quot;</span>:<span class="w"> </span>false,
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26"></a><span class="w">        </span><span class="s2">&quot;warnings&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-12-27"><a id="__codelineno-12-27" name="__codelineno-12-27"></a><span class="w">            </span><span class="s2">&quot;Module did not set no_log for update_password&quot;</span>,
</span><span id="__span-12-28"><a id="__codelineno-12-28" name="__codelineno-12-28"></a><span class="w">            </span><span class="s2">&quot;Module did not set no_log for password_type&quot;</span>
</span><span id="__span-12-29"><a id="__codelineno-12-29" name="__codelineno-12-29"></a><span class="w">        </span><span class="o">]</span>
</span><span id="__span-12-30"><a id="__codelineno-12-30" name="__codelineno-12-30"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-12-31"><a id="__codelineno-12-31" name="__codelineno-12-31"></a><span class="o">}</span>
</span><span id="__span-12-32"><a id="__codelineno-12-32" name="__codelineno-12-32"></a>
</span><span id="__span-12-33"><a id="__codelineno-12-33" name="__codelineno-12-33"></a>TASK<span class="w"> </span><span class="o">[</span>FINAL<span class="w"> </span>TASK:<span class="w"> </span>Save<span class="w"> </span>Config<span class="o">]</span><span class="w"> </span>*****************************************************************
</span><span id="__span-12-34"><a id="__codelineno-12-34" name="__codelineno-12-34"></a>changed:<span class="w"> </span><span class="o">[</span>r1<span class="o">]</span>
</span><span id="__span-12-35"><a id="__codelineno-12-35" name="__codelineno-12-35"></a>
</span><span id="__span-12-36"><a id="__codelineno-12-36" name="__codelineno-12-36"></a>PLAY<span class="w"> </span>RECAP<span class="w"> </span>*************************************************************************************
</span><span id="__span-12-37"><a id="__codelineno-12-37" name="__codelineno-12-37"></a>r1<span class="w">                         </span>:<span class="w"> </span><span class="nv">ok</span><span class="o">=</span><span class="m">3</span><span class="w">    </span><span class="nv">changed</span><span class="o">=</span><span class="m">2</span><span class="w">    </span><span class="nv">unreachable</span><span class="o">=</span><span class="m">0</span><span class="w">    </span><span class="nv">failed</span><span class="o">=</span><span class="m">0</span><span class="w">    </span><span class="nv">skipped</span><span class="o">=</span><span class="m">0</span><span class="w">    </span><span class="nv">rescued</span><span class="o">=</span><span class="m">0</span><span class="w">    </span><span class="nv">ignored</span><span class="o">=</span><span class="m">0</span>
</span></code></pre></div></td></tr></table></div>
<p><img alt="Playbook1 Execution" src="/images/2020/03/add_user_with_key_mask.gif" /></p>
<p>On execution one can see that the commands pushed in the debug task including setting up an IP SSH
keypair, setting a username of joshv, and setting the key hash. Then Ansible exits to what is
expected to be the first level of config mode and sets username <code>joshv</code> without a password.  </p>
<p>Execution is pretty much what we would expect of adding a username to the device. Taking a look at
if we get prompted when connecting to the device is a no, I do not.</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span>
<span class="normal"><a href="#__codelineno-13-15">15</a></span>
<span class="normal"><a href="#__codelineno-13-16">16</a></span>
<span class="normal"><a href="#__codelineno-13-17">17</a></span>
<span class="normal"><a href="#__codelineno-13-18">18</a></span>
<span class="normal"><a href="#__codelineno-13-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="l l-Scalar l-Scalar-Plain">$ ssh rtr-1</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="l l-Scalar l-Scalar-Plain">**************************************************************************</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="l l-Scalar l-Scalar-Plain">* IOSv is strictly limited to use for evaluation, demonstration and IOS  *</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="l l-Scalar l-Scalar-Plain">* education. IOSv is provided as-is and is not supported by Cisco&#39;s      *</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="l l-Scalar l-Scalar-Plain">* Technical Advisory Center. Any use or disclosure, in whole or in part, *</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="l l-Scalar l-Scalar-Plain">* of the IOSv Software or Documentation to any third party for any       *</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="l l-Scalar l-Scalar-Plain">* purposes is expressly prohibited except as otherwise authorized by     *</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="l l-Scalar l-Scalar-Plain">* Cisco in writing.                                                      *</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="l l-Scalar l-Scalar-Plain">**************************************************************************</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="l l-Scalar l-Scalar-Plain">**************************************************************************</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="l l-Scalar l-Scalar-Plain">* IOSv is strictly limited to use for evaluation, demonstration and IOS  *</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="l l-Scalar l-Scalar-Plain">* education. IOSv is provided as-is and is not supported by Cisco&#39;s      *</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="l l-Scalar l-Scalar-Plain">* Technical Advisory Center. Any use or disclosure, in whole or in part, *</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="l l-Scalar l-Scalar-Plain">* of the IOSv Software or Documentation to any third party for any       *</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="l l-Scalar l-Scalar-Plain">* purposes is expressly prohibited except as otherwise authorized by     *</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="l l-Scalar l-Scalar-Plain">* Cisco in writing.                                                      *</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="l l-Scalar l-Scalar-Plain">**************************************************************************</span>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="l l-Scalar l-Scalar-Plain">rtr-1#</span>
</span></code></pre></div></td></tr></table></div>
<p>Taking a look at the configuration in the router, it looks exactly as we would expect. There are
only two users configured. The first being the one that Ansible uses to connect to this device. The
second being the one we just reconfigured.</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="l l-Scalar l-Scalar-Plain">rtr-1#show run | i username</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="l l-Scalar l-Scalar-Plain">username cisco secret 5 $1$GNTQ$RpNy.E9LZMzgrOz/g2pYJ.</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="l l-Scalar l-Scalar-Plain">username joshv nopassword</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">username joshv</span>
</span></code></pre></div></td></tr></table></div>
<p>On the output you see that there is the username <code>joshv</code> multiple times. One is in the generic
username section that was created with the command <code>username joshv nopassword</code> and then another time
that is within the public key section of the SSH configuration.  </p>
<h4 id="removing-ssh-key-user"><a class="toclink" href="../../../../ansible-cisco-ios-user/#removing-ssh-key-user">Removing SSH Key User</a></h4>
<p>To go along with creating an user on the device, I have created the playbook to remove the same user
from the device. This is as simple as changing the state from <code>present</code> to <code>absent</code>. This will
remove all of what was created on the device.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nn">---</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PLAY</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">WORKING</span><span class="nv"> </span><span class="s">WITH</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">USER</span><span class="nv"> </span><span class="s">MODULE&quot;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco_routers</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">network_cli</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">Remove</span><span class="nv"> </span><span class="s">local</span><span class="nv"> </span><span class="s">username</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">SSH</span><span class="nv"> </span><span class="s">Key&quot;</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">      </span><span class="nt">ios_user</span><span class="p">:</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">joshv</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">        </span><span class="nt">nopassword</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">        </span><span class="nt">sshkey</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;file&#39;,</span><span class="nv"> </span><span class="s">&#39;~/.ssh/id_rsa.pub&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absent</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config_output</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">config_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FINAL</span><span class="nv"> </span><span class="s">TASK:</span><span class="nv"> </span><span class="s">Save</span><span class="nv"> </span><span class="s">Config&quot;</span>
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a><span class="w">      </span><span class="nt">ios_config</span><span class="p">:</span>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a><span class="w">        </span><span class="nt">save_when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
</span></code></pre></div>
<p>Execution looks extremely similar. Here it is:</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span>
<span class="normal"><a href="#__codelineno-16-26">26</a></span>
<span class="normal"><a href="#__codelineno-16-27">27</a></span>
<span class="normal"><a href="#__codelineno-16-28">28</a></span>
<span class="normal"><a href="#__codelineno-16-29">29</a></span>
<span class="normal"><a href="#__codelineno-16-30">30</a></span>
<span class="normal"><a href="#__codelineno-16-31">31</a></span>
<span class="normal"><a href="#__codelineno-16-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="l l-Scalar l-Scalar-Plain">PLAY [PLAY 1</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WORKING WITH IOS USER MODULE] ****************************************************</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="l l-Scalar l-Scalar-Plain">TASK [TASK 1</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Remove local username with SSH Key] **********************************************</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="p p-Indicator">[</span><span class="nv">WARNING</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Module did not set no_log for update_password</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="p p-Indicator">[</span><span class="nv">WARNING</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Module did not set no_log for password_type</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="nt">changed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="l l-Scalar l-Scalar-Plain">TASK [debug] ***********************************************************************************</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="nt">ok</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">=&gt; {</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&quot;msg&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">        </span><span class="s">&quot;ansible_facts&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">            </span><span class="s">&quot;discovered_interpreter_python&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;/usr/bin/python&quot;</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">        </span><span class="p p-Indicator">},</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">        </span><span class="s">&quot;changed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">        </span><span class="s">&quot;commands&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">            </span><span class="s">&quot;ip</span><span class="nv"> </span><span class="s">ssh</span><span class="nv"> </span><span class="s">pubkey-chain&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">            </span><span class="s">&quot;no</span><span class="nv"> </span><span class="s">username</span><span class="nv"> </span><span class="s">joshv&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">            </span><span class="s">&quot;exit&quot;</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">        </span><span class="p p-Indicator">],</span>
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">        </span><span class="s">&quot;failed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">        </span><span class="s">&quot;warnings&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">            </span><span class="s">&quot;Module</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">no_log</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">update_password&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">            </span><span class="s">&quot;Module</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">no_log</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">password_type&quot;</span>
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">        </span><span class="p p-Indicator">]</span>
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="w">    </span><span class="p p-Indicator">}</span>
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="err">}</span>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27"></a>
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="l l-Scalar l-Scalar-Plain">TASK [FINAL TASK</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Save Config] *****************************************************************</span>
</span><span id="__span-16-29"><a id="__codelineno-16-29" name="__codelineno-16-29"></a><span class="nt">changed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span>
</span><span id="__span-16-30"><a id="__codelineno-16-30" name="__codelineno-16-30"></a>
</span><span id="__span-16-31"><a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="l l-Scalar l-Scalar-Plain">PLAY RECAP *************************************************************************************</span>
</span><span id="__span-16-32"><a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="nt">r1                         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
</span></code></pre></div></td></tr></table></div>
<blockquote>
<p>In writing of this I did find what I would consider a bug within Ansilbe's ios_user. If you use an
SSH Key with the credential, you will need to remove the user account with running the same taskk
2 times. This is filed under issue <a href="https://github.com/ansible/ansible/issues/68238">https://github.com/ansible/ansible/issues/68238</a></p>
</blockquote>
<p><img alt="Playbook2 Execution" src="/images/2020/03/removing_user_with_key.gif" /></p>
<p>Executing the module a second time you get the full removal of the user account.</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span>
<span class="normal"><a href="#__codelineno-17-25">25</a></span>
<span class="normal"><a href="#__codelineno-17-26">26</a></span>
<span class="normal"><a href="#__codelineno-17-27">27</a></span>
<span class="normal"><a href="#__codelineno-17-28">28</a></span>
<span class="normal"><a href="#__codelineno-17-29">29</a></span>
<span class="normal"><a href="#__codelineno-17-30">30</a></span>
<span class="normal"><a href="#__codelineno-17-31">31</a></span>
<span class="normal"><a href="#__codelineno-17-32">32</a></span>
<span class="normal"><a href="#__codelineno-17-33">33</a></span>
<span class="normal"><a href="#__codelineno-17-34">34</a></span>
<span class="normal"><a href="#__codelineno-17-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="l l-Scalar l-Scalar-Plain">PLAY [PLAY 1</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WORKING WITH IOS USER MODULE] ****************************************************</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="l l-Scalar l-Scalar-Plain">TASK [TASK 1</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Remove local username with SSH Key] **********************************************</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="p p-Indicator">[</span><span class="nv">WARNING</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Module did not set no_log for update_password</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="p p-Indicator">[</span><span class="nv">WARNING</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Module did not set no_log for password_type</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="nt">changed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7"></a>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="l l-Scalar l-Scalar-Plain">TASK [debug] ***********************************************************************************</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="nt">ok</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">=&gt; {</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&quot;msg&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">        </span><span class="s">&quot;ansible_facts&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">            </span><span class="s">&quot;discovered_interpreter_python&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;/usr/bin/python&quot;</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">        </span><span class="p p-Indicator">},</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">        </span><span class="s">&quot;changed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">        </span><span class="s">&quot;commands&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">                </span><span class="s">&quot;answer&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;y&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">                </span><span class="s">&quot;command&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;no</span><span class="nv"> </span><span class="s">username</span><span class="nv"> </span><span class="s">joshv&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">                </span><span class="s">&quot;newline&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span>
</span><span id="__span-17-20"><a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">                </span><span class="s">&quot;prompt&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;This</span><span class="nv"> </span><span class="s">operation</span><span class="nv"> </span><span class="s">will</span><span class="nv"> </span><span class="s">remove</span><span class="nv"> </span><span class="s">all</span><span class="nv"> </span><span class="s">username</span><span class="nv"> </span><span class="s">related</span><span class="nv"> </span><span class="s">configurations</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">same</span><span class="nv"> </span><span class="s">name&quot;</span>
</span><span id="__span-17-21"><a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="w">            </span><span class="p p-Indicator">}</span>
</span><span id="__span-17-22"><a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="w">        </span><span class="p p-Indicator">],</span>
</span><span id="__span-17-23"><a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="w">        </span><span class="s">&quot;failed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span>
</span><span id="__span-17-24"><a id="__codelineno-17-24" name="__codelineno-17-24"></a><span class="w">        </span><span class="s">&quot;warnings&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-17-25"><a id="__codelineno-17-25" name="__codelineno-17-25"></a><span class="w">            </span><span class="s">&quot;Module</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">no_log</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">update_password&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-17-26"><a id="__codelineno-17-26" name="__codelineno-17-26"></a><span class="w">            </span><span class="s">&quot;Module</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">no_log</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">password_type&quot;</span>
</span><span id="__span-17-27"><a id="__codelineno-17-27" name="__codelineno-17-27"></a><span class="w">        </span><span class="p p-Indicator">]</span>
</span><span id="__span-17-28"><a id="__codelineno-17-28" name="__codelineno-17-28"></a><span class="w">    </span><span class="p p-Indicator">}</span>
</span><span id="__span-17-29"><a id="__codelineno-17-29" name="__codelineno-17-29"></a><span class="err">}</span>
</span><span id="__span-17-30"><a id="__codelineno-17-30" name="__codelineno-17-30"></a>
</span><span id="__span-17-31"><a id="__codelineno-17-31" name="__codelineno-17-31"></a><span class="l l-Scalar l-Scalar-Plain">TASK [FINAL TASK</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Save Config] *****************************************************************</span>
</span><span id="__span-17-32"><a id="__codelineno-17-32" name="__codelineno-17-32"></a><span class="nt">changed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span>
</span><span id="__span-17-33"><a id="__codelineno-17-33" name="__codelineno-17-33"></a>
</span><span id="__span-17-34"><a id="__codelineno-17-34" name="__codelineno-17-34"></a><span class="l l-Scalar l-Scalar-Plain">PLAY RECAP *************************************************************************************</span>
</span><span id="__span-17-35"><a id="__codelineno-17-35" name="__codelineno-17-35"></a><span class="nt">r1                         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="setting-username-and-password-no-key"><a class="toclink" href="../../../../ansible-cisco-ios-user/#setting-username-and-password-no-key">Setting Username and Password - No Key</a></h3>
<p>Now that I have gone through the use of creating a SSH Key user, let's take a look at setting an
user account on the device with a credential. I've created a local environmental variable named
<code>NEW_PASSWORD</code> that has the credential that I wish to set the username to. This could be any
lookup that gets a password, such as a lookup to a password manager.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nn">---</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PLAY</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">WORKING</span><span class="nv"> </span><span class="s">WITH</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">USER</span><span class="nv"> </span><span class="s">MODULE&quot;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cisco_routers</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">network_cli</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">Add</span><span class="nv"> </span><span class="s">local</span><span class="nv"> </span><span class="s">username</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">SSH</span><span class="nv"> </span><span class="s">Key&quot;</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">      </span><span class="nt">ios_user</span><span class="p">:</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">josh2</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">        </span><span class="nt">configured_password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">lookup(&#39;env&#39;,</span><span class="nv"> </span><span class="s">&#39;NEW_PASSWORD&#39;)</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">        </span><span class="nt">privilege</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">config_output</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">config_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;FINAL</span><span class="nv"> </span><span class="s">TASK:</span><span class="nv"> </span><span class="s">Save</span><span class="nv"> </span><span class="s">Config&quot;</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">      </span><span class="nt">ios_config</span><span class="p">:</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a><span class="w">        </span><span class="nt">save_when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
</span></code></pre></div>
<p>The output on this particular setup is <strong>not</strong> idempotent. Each time the play will be run it will
set a new username and password on the device due to the checking of the running configuration. You
will need to add some additional logic to your playbook to have the task only executed when a
condition is met.  </p>
<p>Here is the execution. Note that Ansible masks the password being set.</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="l l-Scalar l-Scalar-Plain">PLAY [PLAY 1</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WORKING WITH IOS USER MODULE] ****************************************************</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="l l-Scalar l-Scalar-Plain">TASK [TASK 1</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Add local username with SSH Key] *************************************************</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="p p-Indicator">[</span><span class="nv">WARNING</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Module did not set no_log for update_password</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="p p-Indicator">[</span><span class="nv">WARNING</span><span class="p p-Indicator">]:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Module did not set no_log for password_type</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="nt">changed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7"></a>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="l l-Scalar l-Scalar-Plain">TASK [debug] ***********************************************************************************</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="nt">ok</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">=&gt; {</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&quot;msg&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">        </span><span class="s">&quot;ansible_facts&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">{</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">            </span><span class="s">&quot;discovered_interpreter_python&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;/usr/bin/python&quot;</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">        </span><span class="p p-Indicator">},</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">        </span><span class="s">&quot;changed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">        </span><span class="s">&quot;commands&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16"></a><span class="w">            </span><span class="s">&quot;username</span><span class="nv"> </span><span class="s">josh2</span><span class="nv"> </span><span class="s">secret</span><span class="nv"> </span><span class="s">********&quot;</span>
</span><span id="__span-19-17"><a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">        </span><span class="p p-Indicator">],</span>
</span><span id="__span-19-18"><a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">        </span><span class="s">&quot;failed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span>
</span><span id="__span-19-19"><a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">        </span><span class="s">&quot;warnings&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-19-20"><a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">            </span><span class="s">&quot;Module</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">no_log</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">update_password&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-19-21"><a id="__codelineno-19-21" name="__codelineno-19-21"></a><span class="w">            </span><span class="s">&quot;Module</span><span class="nv"> </span><span class="s">did</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">set</span><span class="nv"> </span><span class="s">no_log</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">password_type&quot;</span>
</span><span id="__span-19-22"><a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="w">        </span><span class="p p-Indicator">]</span>
</span><span id="__span-19-23"><a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="w">    </span><span class="p p-Indicator">}</span>
</span><span id="__span-19-24"><a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="err">}</span>
</span><span id="__span-19-25"><a id="__codelineno-19-25" name="__codelineno-19-25"></a>
</span><span id="__span-19-26"><a id="__codelineno-19-26" name="__codelineno-19-26"></a><span class="l l-Scalar l-Scalar-Plain">TASK [FINAL TASK</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Save Config] *****************************************************************</span>
</span><span id="__span-19-27"><a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="nt">changed</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">r1</span><span class="p p-Indicator">]</span>
</span><span id="__span-19-28"><a id="__codelineno-19-28" name="__codelineno-19-28"></a>
</span><span id="__span-19-29"><a id="__codelineno-19-29" name="__codelineno-19-29"></a><span class="l l-Scalar l-Scalar-Plain">PLAY RECAP *************************************************************************************</span>
</span><span id="__span-19-30"><a id="__codelineno-19-30" name="__codelineno-19-30"></a><span class="nt">r1                         </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ok=3    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0</span>
</span></code></pre></div></td></tr></table></div>
<p><img alt="Playbook2 Execution" src="/images/2020/03/add_user_with_pass.gif" /></p>
<h3 id="summary"><a class="toclink" href="../../../../ansible-cisco-ios-user/#summary">Summary</a></h3>
<p>From the examples that I have given, hopefully this will help to see what you <em>could</em> do in your own
environment. Need to regularly rotate an offline access password? A playbook may be a way that is
low impact to get you on your way for automating the management of your Cisco IOS devices.  </p>
<p>I also started with the use of SSH keys as well as this may be an under utilized method to log into
devices. This sets up and uses a known cryptographic key set for authentication. Please check with
the team/individuals responsible for security before implementing.  </p>
<p>As always, I hope this has helped!</p>
<p>I've added the Playbooks executed within this post to my collection of examples on Github at
<a href="https://github.com/jvanderaa/ansible-using_ios">https://github.com/jvanderaa/ansible-using_ios</a>.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
      <nav class="md-post__authors md-typeset">
        
          <span class="md-author">
            <img src="https://avatars.githubusercontent.com/u/22228848" alt="Josh VanDeraa">
          </span>
        
      </nav>
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-01-26 00:00:00">January 26, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              8 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="ansible-cisco-ios_interfaces-module"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/">Ansible Cisco ios_interfaces module</a></h2>
<p>This has become a post about the <strong>ios_interfaces</strong> module with documentation that can be found
<a href="https://docs.ansible.com/ansible/latest/modules/ios_interfaces_module.html">Ansible ios_interfaces doc</a>.
Originally I was going to write about the deprecations for just the Cisco IOS modules. Then as I
investigated further, I had found that there are many more modules that are being deprecated. In
this post I will take a closer look at the differences between the <code>ios_interface</code> and <code>ios_vlan</code>
modules that I had written posts on last year and what their new counter parts look like. And in the
end the post had quite a bit of good detail about the module. I think you will like what is here.  </p>
<blockquote>
<p>Previous Posts</p>
<ul>
<li><a href="https://josh-v.com/blog/2019/03/17/ansible-cisco-ios-interface.html">ios_interface</a></li>
<li><a href="https://josh-v.com/blog/2019/03/09/ansible-ios-vlan.html">ios_vlan</a></li>
</ul>
</blockquote>
<h3 id="module-deprecations"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#module-deprecations">Module Deprecations</a></h3>
<p>In addition to the Cisco "legacy" interface and vlan modules that are being deprecated, the Ansible
generic modules are being deprecated as well. These include <code>net_interface</code>, <code>net_linkagg</code>,
<code>net_l2/l3_interface</code>, and <code>net_l2/l3_vlan</code>.  </p>
<p>Not to be outdone, not only are the Cisco and Ansible generic modules being deprecated, so are each
of the same set of modules for Juniper, EOS, VYOS, NXOS, IOSXR, and Netvisor.  </p>
<p>In all by doing a browser search for <code>(D)</code> on the Ansible 2.9 Network Modules
<a href="https://docs.ansible.com/ansible/2.9/modules/list_of_network_modules.html">page</a> I come across a
total of 77 different modules that are in the process of being deprecated. That is quite a bit, so
make sure that you are taking a look at your playbooks to look for this.  </p>
<p>One of the downsides I see coming out of this module change is the change from <code>ios_interface</code> to
<code>ios_interfaces</code>. This is such a subtle difference between the two. You are going to need to pay
extra attention to it. In fact I was taken back when I first saw the parameters of the module being
posted on the Network To Code Public Slack that I had to take a second look. I thought that someone
was way off on the parameters they were using. Then I saw the deprecations and new modules.</p>
<h4 id="panos-module-deprecation"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#panos-module-deprecation">PANOS Module Deprecation</a></h4>
<p>I did also observe an interesting (in my mind) planned deprecation. All of the PANOS modules are
planned to be deprecated in favor of using community drivers from Ansible Galaxy. Why is this
interesting? Well, this is the start of the move to move modules out of Ansible Core and start using
Ansible Galaxy to distribute the modules that you need. More on that to come in another post.</p>
<h3 id="differences"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#differences">Differences</a></h3>
<p>There are quite a bit of differences in the modules. The first level parameters for <em>_interfaces
across vendors has been reduced to just two, </em><em>config</em><em> and </em><em>state</em>*.  </p>
<p>A second difference that I'm observing is the lack of the ability to save the config when change.
This means that you as the playbook creator will need to take action such as notifying a handler or
running a save config when there is a change. You can do this, or have a task executed when there is
a change.</p>
<h4 id="config"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#config">Config</a></h4>
<p>All of the bulk of the configuration has moved into the config parameter. Within Cisco
<code>ios_interfaces</code> you now have the options to configure the <em>description</em>, <em>duplex</em>, <em>enabled</em>,
<em>mtu</em>, <em>name</em>*, and <em>speed</em>. These were previously first level parameters within the module
definition. You can find the module definition at
<a href="https://docs.ansible.com/ansible/latest/modules/ios_interfaces_module.html">Ansible Docs ios_interfaces</a>.</p>
<h4 id="state"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#state">State</a></h4>
<p>The state is now referencing the configuration of the interface. It does not state whether or not
the interface is enabled or disabled. That is controlled by the <em>enabled</em> sub-parameter of
<strong>config</strong>. The options for <strong>state</strong> include <em>merged</em> (default setting), <em>replaced</em>, <em>overridden</em>,
and <em>deleted</em>.</p>
<h5 id="state-merged"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#state-merged">State: Merged</a></h5>
<p>This looks to take whatever is already in the interface configuration and adding/replacing based on
what the module parameters that are configured. So if you have an interface that has just the speed
configured and you just have a task that configures the duplex, you will have speed and duplex
configured.  </p>
<p>With the merged module, you will run the commands that are defined, not worrying about the defaults.
For this demo, I have set the MTU to 1450, which is different than the default of 1500 for this
device type. You will see that in other states, that Ansible will change the configuration. Where as
with the <strong>merged</strong> type, you will run the commands seen in the module parameters, not worrying
about the other parameters not provided.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">merge&quot;</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">        </span><span class="nt">ios_interfaces</span><span class="p">:</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">replaced</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">        </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GigabitEthernet0/3</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">            </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">        </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ios_interface_output</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">2:</span><span class="nv"> </span><span class="s">SYS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">DEBUG</span><span class="nv"> </span><span class="s">OUTPUT&quot;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="w">        </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ios_interface_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span></code></pre></div>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="s">&quot;commands&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">    </span><span class="s">&quot;interface</span><span class="nv"> </span><span class="s">GigabitEthernet0/3&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="s">&quot;description</span><span class="nv"> </span><span class="s">Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span></code></pre></div></td></tr></table></div>
<h5 id="state-replaced"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#state-replaced">State: Replaced</a></h5>
<p>When using replaced, the entire interface will be configured with what is set in the module. If you
set duplex only, you will only get the duplex of the interface set.  </p>
<p>In this example I will only be looking to enable the interface and change the description. There
will be no changes to the other interfaces defined.  </p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">merge&quot;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">      </span><span class="nt">ios_interfaces</span><span class="p">:</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">replaced</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">        </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GigabitEthernet0/3</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">            </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ios_interface_output</span>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">2:</span><span class="nv"> </span><span class="s">SYS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">DEBUG</span><span class="nv"> </span><span class="s">OUTPUT&quot;</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">      </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ios_interface_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span></code></pre></div>
<p>The output (shown in full here only, will skip the "after" and "before" keys in subsequent examples)
shows that the only changes being made are to <code>GigabitEthernet0/3</code>. This is similar to what we will
see in the overridden section. Overridden will configure every interface on the device vs replaced
looks to only be handling the interface defined within the config parameter.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span>
<span class="normal"><a href="#__codelineno-16-26">26</a></span>
<span class="normal"><a href="#__codelineno-16-27">27</a></span>
<span class="normal"><a href="#__codelineno-16-28">28</a></span>
<span class="normal"><a href="#__codelineno-16-29">29</a></span>
<span class="normal"><a href="#__codelineno-16-30">30</a></span>
<span class="normal"><a href="#__codelineno-16-31">31</a></span>
<span class="normal"><a href="#__codelineno-16-32">32</a></span>
<span class="normal"><a href="#__codelineno-16-33">33</a></span>
<span class="normal"><a href="#__codelineno-16-34">34</a></span>
<span class="normal"><a href="#__codelineno-16-35">35</a></span>
<span class="normal"><a href="#__codelineno-16-36">36</a></span>
<span class="normal"><a href="#__codelineno-16-37">37</a></span>
<span class="normal"><a href="#__codelineno-16-38">38</a></span>
<span class="normal"><a href="#__codelineno-16-39">39</a></span>
<span class="normal"><a href="#__codelineno-16-40">40</a></span>
<span class="normal"><a href="#__codelineno-16-41">41</a></span>
<span class="normal"><a href="#__codelineno-16-42">42</a></span>
<span class="normal"><a href="#__codelineno-16-43">43</a></span>
<span class="normal"><a href="#__codelineno-16-44">44</a></span>
<span class="normal"><a href="#__codelineno-16-45">45</a></span>
<span class="normal"><a href="#__codelineno-16-46">46</a></span>
<span class="normal"><a href="#__codelineno-16-47">47</a></span>
<span class="normal"><a href="#__codelineno-16-48">48</a></span>
<span class="normal"><a href="#__codelineno-16-49">49</a></span>
<span class="normal"><a href="#__codelineno-16-50">50</a></span>
<span class="normal"><a href="#__codelineno-16-51">51</a></span>
<span class="normal"><a href="#__codelineno-16-52">52</a></span>
<span class="normal"><a href="#__codelineno-16-53">53</a></span>
<span class="normal"><a href="#__codelineno-16-54">54</a></span>
<span class="normal"><a href="#__codelineno-16-55">55</a></span>
<span class="normal"><a href="#__codelineno-16-56">56</a></span>
<span class="normal"><a href="#__codelineno-16-57">57</a></span>
<span class="normal"><a href="#__codelineno-16-58">58</a></span>
<span class="normal"><a href="#__codelineno-16-59">59</a></span>
<span class="normal"><a href="#__codelineno-16-60">60</a></span>
<span class="normal"><a href="#__codelineno-16-61">61</a></span>
<span class="normal"><a href="#__codelineno-16-62">62</a></span>
<span class="normal"><a href="#__codelineno-16-63">63</a></span>
<span class="normal"><a href="#__codelineno-16-64">64</a></span>
<span class="normal"><a href="#__codelineno-16-65">65</a></span>
<span class="normal"><a href="#__codelineno-16-66">66</a></span>
<span class="normal"><a href="#__codelineno-16-67">67</a></span>
<span class="normal"><a href="#__codelineno-16-68">68</a></span>
<span class="normal"><a href="#__codelineno-16-69">69</a></span>
<span class="normal"><a href="#__codelineno-16-70">70</a></span>
<span class="normal"><a href="#__codelineno-16-71">71</a></span>
<span class="normal"><a href="#__codelineno-16-72">72</a></span>
<span class="normal"><a href="#__codelineno-16-73">73</a></span>
<span class="normal"><a href="#__codelineno-16-74">74</a></span>
<span class="normal"><a href="#__codelineno-16-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="w">    </span><span class="s2">&quot;msg&quot;</span>:<span class="w"> </span><span class="o">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">        </span><span class="s2">&quot;after&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;loopback0&quot;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/0&quot;</span>,
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">                </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;MANAGEMENT&quot;</span>,
</span><span id="__span-16-15"><a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-16"><a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-17"><a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/1&quot;</span>,
</span><span id="__span-16-18"><a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-19"><a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-20"><a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-21"><a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">                </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;PRODUCTION&quot;</span>,
</span><span id="__span-16-22"><a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-23"><a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-24"><a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">                </span><span class="s2">&quot;mtu&quot;</span>:<span class="w"> </span><span class="m">1400</span>,
</span><span id="__span-16-25"><a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/2&quot;</span>,
</span><span id="__span-16-26"><a id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-27"><a id="__codelineno-16-27" name="__codelineno-16-27"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-28"><a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-29"><a id="__codelineno-16-29" name="__codelineno-16-29"></a><span class="w">                </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;Configured by Ansible&quot;</span>,
</span><span id="__span-16-30"><a id="__codelineno-16-30" name="__codelineno-16-30"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-31"><a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-32"><a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/3&quot;</span>,
</span><span id="__span-16-33"><a id="__codelineno-16-33" name="__codelineno-16-33"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-34"><a id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-16-35"><a id="__codelineno-16-35" name="__codelineno-16-35"></a><span class="w">        </span><span class="o">]</span>,
</span><span id="__span-16-36"><a id="__codelineno-16-36" name="__codelineno-16-36"></a><span class="w">        </span><span class="s2">&quot;before&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-16-37"><a id="__codelineno-16-37" name="__codelineno-16-37"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-38"><a id="__codelineno-16-38" name="__codelineno-16-38"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-39"><a id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;loopback0&quot;</span>
</span><span id="__span-16-40"><a id="__codelineno-16-40" name="__codelineno-16-40"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-41"><a id="__codelineno-16-41" name="__codelineno-16-41"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-42"><a id="__codelineno-16-42" name="__codelineno-16-42"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-43"><a id="__codelineno-16-43" name="__codelineno-16-43"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-44"><a id="__codelineno-16-44" name="__codelineno-16-44"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/0&quot;</span>,
</span><span id="__span-16-45"><a id="__codelineno-16-45" name="__codelineno-16-45"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-46"><a id="__codelineno-16-46" name="__codelineno-16-46"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-47"><a id="__codelineno-16-47" name="__codelineno-16-47"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-48"><a id="__codelineno-16-48" name="__codelineno-16-48"></a><span class="w">                </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;MANAGEMENT&quot;</span>,
</span><span id="__span-16-49"><a id="__codelineno-16-49" name="__codelineno-16-49"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-50"><a id="__codelineno-16-50" name="__codelineno-16-50"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-51"><a id="__codelineno-16-51" name="__codelineno-16-51"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/1&quot;</span>,
</span><span id="__span-16-52"><a id="__codelineno-16-52" name="__codelineno-16-52"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-53"><a id="__codelineno-16-53" name="__codelineno-16-53"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-54"><a id="__codelineno-16-54" name="__codelineno-16-54"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-55"><a id="__codelineno-16-55" name="__codelineno-16-55"></a><span class="w">                </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;PRODUCTION&quot;</span>,
</span><span id="__span-16-56"><a id="__codelineno-16-56" name="__codelineno-16-56"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-57"><a id="__codelineno-16-57" name="__codelineno-16-57"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-58"><a id="__codelineno-16-58" name="__codelineno-16-58"></a><span class="w">                </span><span class="s2">&quot;mtu&quot;</span>:<span class="w"> </span><span class="m">1400</span>,
</span><span id="__span-16-59"><a id="__codelineno-16-59" name="__codelineno-16-59"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/2&quot;</span>,
</span><span id="__span-16-60"><a id="__codelineno-16-60" name="__codelineno-16-60"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-61"><a id="__codelineno-16-61" name="__codelineno-16-61"></a><span class="w">            </span><span class="o">}</span>,
</span><span id="__span-16-62"><a id="__codelineno-16-62" name="__codelineno-16-62"></a><span class="w">            </span><span class="o">{</span>
</span><span id="__span-16-63"><a id="__codelineno-16-63" name="__codelineno-16-63"></a><span class="w">                </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;BEFORE ANSIBLE&quot;</span>,
</span><span id="__span-16-64"><a id="__codelineno-16-64" name="__codelineno-16-64"></a><span class="w">                </span><span class="s2">&quot;duplex&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>,
</span><span id="__span-16-65"><a id="__codelineno-16-65" name="__codelineno-16-65"></a><span class="w">                </span><span class="s2">&quot;enabled&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-66"><a id="__codelineno-16-66" name="__codelineno-16-66"></a><span class="w">                </span><span class="s2">&quot;mtu&quot;</span>:<span class="w"> </span><span class="m">1450</span>,
</span><span id="__span-16-67"><a id="__codelineno-16-67" name="__codelineno-16-67"></a><span class="w">                </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;GigabitEthernet0/3&quot;</span>,
</span><span id="__span-16-68"><a id="__codelineno-16-68" name="__codelineno-16-68"></a><span class="w">                </span><span class="s2">&quot;speed&quot;</span>:<span class="w"> </span><span class="s2">&quot;auto&quot;</span>
</span><span id="__span-16-69"><a id="__codelineno-16-69" name="__codelineno-16-69"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-16-70"><a id="__codelineno-16-70" name="__codelineno-16-70"></a><span class="w">        </span><span class="o">]</span>,
</span><span id="__span-16-71"><a id="__codelineno-16-71" name="__codelineno-16-71"></a><span class="w">        </span><span class="s2">&quot;changed&quot;</span>:<span class="w"> </span>true,
</span><span id="__span-16-72"><a id="__codelineno-16-72" name="__codelineno-16-72"></a><span class="w">        </span><span class="s2">&quot;commands&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-16-73"><a id="__codelineno-16-73" name="__codelineno-16-73"></a><span class="w">            </span><span class="s2">&quot;interface GigabitEthernet0/3&quot;</span>,
</span><span id="__span-16-74"><a id="__codelineno-16-74" name="__codelineno-16-74"></a><span class="w">            </span><span class="s2">&quot;no mtu&quot;</span>,
</span><span id="__span-16-75"><a id="__codelineno-16-75" name="__codelineno-16-75"></a><span class="w">            </span><span class="s2">&quot;description Configured by Ansible&quot;</span>
</span></code></pre></div></td></tr></table></div>
<h5 id="state-overridden"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#state-overridden">State: Overridden</a></h5>
<p>This one was not completely obvious to me when originally looking at. But as I tested, I have now
come to find that this state is something to be <strong>VERY</strong> cautious with. In the testing, I had the
following configuration on the devices:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a>interface<span class="w"> </span>GigabitEthernet0/1
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w"> </span>description<span class="w"> </span>MANAGEMENT
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w"> </span>OUTPUT<span class="w"> </span>OMITTED
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a>!
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5"></a>interface<span class="w"> </span>GigabitEthernet0/2
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w"> </span>description<span class="w"> </span>PRODUCTION
</span></code></pre></div></td></tr></table></div>
<p>You can see that there are configurations applied to the description. I then created these playbook
tasks to test the <code>Overridden</code> setting.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">merge&quot;</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">      </span><span class="nt">ios_interfaces</span><span class="p">:</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overridden</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">        </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GigabitEthernet0/3</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">            </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ios_interface_output</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">2:</span><span class="nv"> </span><span class="s">SYS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">DEBUG</span><span class="nv"> </span><span class="s">OUTPUT&quot;</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">      </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ios_interface_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span></code></pre></div>
<p>The output shows that Ansible is going to erase the description lines:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="s2">&quot;commands&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="s2">&quot;interface GigabitEthernet0/1&quot;</span>,
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">    </span><span class="s2">&quot;no description&quot;</span>,
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="s2">&quot;interface GigabitEthernet0/2&quot;</span>,
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">    </span><span class="s2">&quot;no description&quot;</span>
</span></code></pre></div></td></tr></table></div>
<p>This indicates that Ansible will default settings that are not specifically defined within the
module.</p>
<p>The next test I changed the MTU on <code>GigabitEthernet0/1</code> and <code>GigabitEthernet0/2</code> to some random
14xx MTUs. I've left everything else the same as the play above with no changing fo the MTU, just
setting the description on a single interface. The results from running that playbook now show that
the interface MTU is reset to default since it was not statically defined in the task.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span>
<span class="normal"><a href="#__codelineno-20-7">7</a></span>
<span class="normal"><a href="#__codelineno-20-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="w">    </span><span class="s2">&quot;commands&quot;</span>:<span class="w"> </span><span class="o">[</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="s2">&quot;interface GigabitEthernet0/1&quot;</span>,
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">    </span><span class="s2">&quot;no mtu&quot;</span>,
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">    </span><span class="s2">&quot;interface GigabitEthernet0/2&quot;</span>,
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">    </span><span class="s2">&quot;no mtu&quot;</span>,
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">    </span><span class="s2">&quot;interface GigabitEthernet0/3&quot;</span>,
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">    </span><span class="s2">&quot;no mtu&quot;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="o">]</span>,
</span></code></pre></div></td></tr></table></div>
<h6 id="state-overridden-loop"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#state-overridden-loop">State: Overridden - Loop</a></h6>
<p>So what does this look like if we wanted to loop over a set of interfaces? Would there be special
considerations made for the module? The answer is no. If you attempted to loop over a module that is
using the state of <strong>overridden</strong>, then you are going to default the other interfaces. Given the
following task:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">merge&quot;</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">      </span><span class="nt">ios_interfaces</span><span class="p">:</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overridden</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">        </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">item</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">            </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ios_interface_output</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">      </span><span class="nt">loop</span><span class="p">:</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/2&quot;</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/3&quot;</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="w">      </span><span class="nt">loop_control</span><span class="p">:</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="w">        </span><span class="nt">loop_var</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">item</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">2:</span><span class="nv"> </span><span class="s">SYS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">DEBUG</span><span class="nv"> </span><span class="s">OUTPUT&quot;</span>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="w">      </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ios_interface_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span></code></pre></div>
<p>You will have two loops. The first time through the loop when the loop_var is <code>GigabitEthernet0/2</code>
you will have the other interfaces all defaulted, except <code>GigabitEthernet0/2</code> will have the state
enabled and the description set to <code>Configured by Ansible</code>. The rest of the interface descriptions
will be removed. MTU all set to default, and so on.  </p>
<p>The second time through the loop the module will configure <code>GigabitEthernet0/3</code> with each of the
interface configurations. Defaulting the rest of the interfaces on teh device. So the description
at the end of this execution for <code>GigabitEthernet0/2</code> will be blank. Even though it was configured
on the first loop through.</p>
<p>To handle this you will need to define the interfaces within the context of the config. Here is the
new configuration of the tasks:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">merge&quot;</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">      </span><span class="nt">ios_interfaces</span><span class="p">:</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">overridden</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">        </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/2&quot;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">            </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/3&quot;</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">            </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ios_interface_output</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">2:</span><span class="nv"> </span><span class="s">SYS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">DEBUG</span><span class="nv"> </span><span class="s">OUTPUT&quot;</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">      </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ios_interface_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span></code></pre></div>
<p>With having multiple interfaces defined under the config as another list item you are able to get
both of the interfaces configured with what you are looking to do.</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span>
<span class="normal"><a href="#__codelineno-23-20">20</a></span>
<span class="normal"><a href="#__codelineno-23-21">21</a></span>
<span class="normal"><a href="#__codelineno-23-22">22</a></span>
<span class="normal"><a href="#__codelineno-23-23">23</a></span>
<span class="normal"><a href="#__codelineno-23-24">24</a></span>
<span class="normal"><a href="#__codelineno-23-25">25</a></span>
<span class="normal"><a href="#__codelineno-23-26">26</a></span>
<span class="normal"><a href="#__codelineno-23-27">27</a></span>
<span class="normal"><a href="#__codelineno-23-28">28</a></span>
<span class="normal"><a href="#__codelineno-23-29">29</a></span>
<span class="normal"><a href="#__codelineno-23-30">30</a></span>
<span class="normal"><a href="#__codelineno-23-31">31</a></span>
<span class="normal"><a href="#__codelineno-23-32">32</a></span>
<span class="normal"><a href="#__codelineno-23-33">33</a></span>
<span class="normal"><a href="#__codelineno-23-34">34</a></span>
<span class="normal"><a href="#__codelineno-23-35">35</a></span>
<span class="normal"><a href="#__codelineno-23-36">36</a></span>
<span class="normal"><a href="#__codelineno-23-37">37</a></span>
<span class="normal"><a href="#__codelineno-23-38">38</a></span>
<span class="normal"><a href="#__codelineno-23-39">39</a></span>
<span class="normal"><a href="#__codelineno-23-40">40</a></span>
<span class="normal"><a href="#__codelineno-23-41">41</a></span>
<span class="normal"><a href="#__codelineno-23-42">42</a></span>
<span class="normal"><a href="#__codelineno-23-43">43</a></span>
<span class="normal"><a href="#__codelineno-23-44">44</a></span>
<span class="normal"><a href="#__codelineno-23-45">45</a></span>
<span class="normal"><a href="#__codelineno-23-46">46</a></span>
<span class="normal"><a href="#__codelineno-23-47">47</a></span>
<span class="normal"><a href="#__codelineno-23-48">48</a></span>
<span class="normal"><a href="#__codelineno-23-49">49</a></span>
<span class="normal"><a href="#__codelineno-23-50">50</a></span>
<span class="normal"><a href="#__codelineno-23-51">51</a></span>
<span class="normal"><a href="#__codelineno-23-52">52</a></span>
<span class="normal"><a href="#__codelineno-23-53">53</a></span>
<span class="normal"><a href="#__codelineno-23-54">54</a></span>
<span class="normal"><a href="#__codelineno-23-55">55</a></span>
<span class="normal"><a href="#__codelineno-23-56">56</a></span>
<span class="normal"><a href="#__codelineno-23-57">57</a></span>
<span class="normal"><a href="#__codelineno-23-58">58</a></span>
<span class="normal"><a href="#__codelineno-23-59">59</a></span>
<span class="normal"><a href="#__codelineno-23-60">60</a></span>
<span class="normal"><a href="#__codelineno-23-61">61</a></span>
<span class="normal"><a href="#__codelineno-23-62">62</a></span>
<span class="normal"><a href="#__codelineno-23-63">63</a></span>
<span class="normal"><a href="#__codelineno-23-64">64</a></span>
<span class="normal"><a href="#__codelineno-23-65">65</a></span>
<span class="normal"><a href="#__codelineno-23-66">66</a></span>
<span class="normal"><a href="#__codelineno-23-67">67</a></span>
<span class="normal"><a href="#__codelineno-23-68">68</a></span>
<span class="normal"><a href="#__codelineno-23-69">69</a></span>
<span class="normal"><a href="#__codelineno-23-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="w">        </span><span class="s">&quot;after&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;loopback0&quot;</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/0&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/1&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="w">                </span><span class="s">&quot;description&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/2&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26"></a><span class="w">                </span><span class="s">&quot;description&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/3&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31"></a><span class="w">            </span><span class="p p-Indicator">}</span>
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32"></a><span class="w">        </span><span class="p p-Indicator">]</span><span class="err">,</span>
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33"></a><span class="w">        </span><span class="s">&quot;before&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-23-34"><a id="__codelineno-23-34" name="__codelineno-23-34"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-35"><a id="__codelineno-23-35" name="__codelineno-23-35"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-36"><a id="__codelineno-23-36" name="__codelineno-23-36"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;loopback0&quot;</span>
</span><span id="__span-23-37"><a id="__codelineno-23-37" name="__codelineno-23-37"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-38"><a id="__codelineno-23-38" name="__codelineno-23-38"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-39"><a id="__codelineno-23-39" name="__codelineno-23-39"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-40"><a id="__codelineno-23-40" name="__codelineno-23-40"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-41"><a id="__codelineno-23-41" name="__codelineno-23-41"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/0&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-42"><a id="__codelineno-23-42" name="__codelineno-23-42"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-43"><a id="__codelineno-23-43" name="__codelineno-23-43"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-44"><a id="__codelineno-23-44" name="__codelineno-23-44"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-45"><a id="__codelineno-23-45" name="__codelineno-23-45"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-46"><a id="__codelineno-23-46" name="__codelineno-23-46"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-47"><a id="__codelineno-23-47" name="__codelineno-23-47"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/1&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-48"><a id="__codelineno-23-48" name="__codelineno-23-48"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-49"><a id="__codelineno-23-49" name="__codelineno-23-49"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-50"><a id="__codelineno-23-50" name="__codelineno-23-50"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-51"><a id="__codelineno-23-51" name="__codelineno-23-51"></a><span class="w">                </span><span class="s">&quot;description&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;BEFORE</span><span class="nv"> </span><span class="s">ANSIBLE&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-52"><a id="__codelineno-23-52" name="__codelineno-23-52"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-53"><a id="__codelineno-23-53" name="__codelineno-23-53"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-54"><a id="__codelineno-23-54" name="__codelineno-23-54"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/2&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-55"><a id="__codelineno-23-55" name="__codelineno-23-55"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-56"><a id="__codelineno-23-56" name="__codelineno-23-56"></a><span class="w">            </span><span class="p p-Indicator">},</span>
</span><span id="__span-23-57"><a id="__codelineno-23-57" name="__codelineno-23-57"></a><span class="w">            </span><span class="p p-Indicator">{</span>
</span><span id="__span-23-58"><a id="__codelineno-23-58" name="__codelineno-23-58"></a><span class="w">                </span><span class="s">&quot;description&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;BEFORE</span><span class="nv"> </span><span class="s">ANSIBLE&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-59"><a id="__codelineno-23-59" name="__codelineno-23-59"></a><span class="w">                </span><span class="s">&quot;duplex&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-60"><a id="__codelineno-23-60" name="__codelineno-23-60"></a><span class="w">                </span><span class="s">&quot;enabled&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-61"><a id="__codelineno-23-61" name="__codelineno-23-61"></a><span class="w">                </span><span class="s">&quot;name&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;GigabitEthernet0/3&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-62"><a id="__codelineno-23-62" name="__codelineno-23-62"></a><span class="w">                </span><span class="s">&quot;speed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;auto&quot;</span>
</span><span id="__span-23-63"><a id="__codelineno-23-63" name="__codelineno-23-63"></a><span class="w">            </span><span class="p p-Indicator">}</span>
</span><span id="__span-23-64"><a id="__codelineno-23-64" name="__codelineno-23-64"></a><span class="w">        </span><span class="p p-Indicator">]</span><span class="err">,</span>
</span><span id="__span-23-65"><a id="__codelineno-23-65" name="__codelineno-23-65"></a><span class="w">        </span><span class="s">&quot;changed&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true,</span>
</span><span id="__span-23-66"><a id="__codelineno-23-66" name="__codelineno-23-66"></a><span class="w">        </span><span class="s">&quot;commands&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-23-67"><a id="__codelineno-23-67" name="__codelineno-23-67"></a><span class="w">            </span><span class="s">&quot;interface</span><span class="nv"> </span><span class="s">GigabitEthernet0/2&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-68"><a id="__codelineno-23-68" name="__codelineno-23-68"></a><span class="w">            </span><span class="s">&quot;description</span><span class="nv"> </span><span class="s">Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-69"><a id="__codelineno-23-69" name="__codelineno-23-69"></a><span class="w">            </span><span class="s">&quot;interface</span><span class="nv"> </span><span class="s">GigabitEthernet0/3&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-23-70"><a id="__codelineno-23-70" name="__codelineno-23-70"></a><span class="w">            </span><span class="s">&quot;description</span><span class="nv"> </span><span class="s">Configured</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">Ansible&quot;</span>
</span></code></pre></div></td></tr></table></div>
<p>You now see within the <em>commands</em> key that both of hte interfaces are configured by Ansible. At this
point with both interfaces being defined in the config parameter, you get both of the interfaces
configured. To do this more programmatically  you would need to create the list ahead of time and
feed the list of interfaces with their state into the module. This may be a future blog post.</p>
<h5 id="state-deleted"><a class="toclink" href="../../../../ansible-cisco-ios-interfaces-module/#state-deleted">State: Deleted</a></h5>
<p>The task looks straight to the point for the deleted status. As expected. In this you define which
interface name is to have the configuration removed, and then the module will default all of the
sub-parameters of <em>description</em>, <em>duplex</em>, <em>enabled</em>, <em>mtu</em>, and <em>speed</em>. Note that the <em>enabled</em>
default in the module is currently (2020-01-26) set to enabled.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">1:</span><span class="nv"> </span><span class="s">IOS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">Set</span><span class="nv"> </span><span class="s">some</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">merge&quot;</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">      </span><span class="nt">ios_interfaces</span><span class="p">:</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deleted</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">        </span><span class="nt">config</span><span class="p">:</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GigabitEthernet0/3</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">        </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ios_interface_output</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TASK</span><span class="nv"> </span><span class="s">2:</span><span class="nv"> </span><span class="s">SYS</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">DEBUG</span><span class="nv"> </span><span class="s">OUTPUT&quot;</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">      </span><span class="nt">debug</span><span class="p">:</span>
</span><span id="__span-24-11"><a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">        </span><span class="nt">msg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">ios_interface_output</span><span class="nv"> </span><span class="s">}}&quot;</span>
</span></code></pre></div>
<p>When the configuration previously had an interface description and an MTU set, the following is
the commands that are executed on just the single interface that is defined in the task:</p>
<div class="language-yaml highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span>
<span class="normal"><a href="#__codelineno-25-3">3</a></span>
<span class="normal"><a href="#__codelineno-25-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="s">&quot;commands&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="p p-Indicator">[</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">    </span><span class="s">&quot;interface</span><span class="nv"> </span><span class="s">GigabitEthernet0/3&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">    </span><span class="s">&quot;no</span><span class="nv"> </span><span class="s">description&quot;</span><span class="p p-Indicator">,</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">    </span><span class="s">&quot;no</span><span class="nv"> </span><span class="s">mtu&quot;</span>
</span></code></pre></div></td></tr></table></div>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <span class="md-pagination__current">2</span>
</nav>
        
      
    </div>
  </div>

          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../../2021/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 2021">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                2021
              </div>
            </div>
          </a>
        
        
          
          <a href="../../../2019/" class="md-footer__link md-footer__link--next" aria-label="Next: 2019">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                2019
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2018 - 2024 Josh VanDeraa ‚Äì <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/jvanderaa" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/josh-vanderaa/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/vanderaaj" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
    
    
    
      
      
    
    <a href="https://fosstodon.org/@jvanderaa" target="_blank" rel="noopener me" title="fosstodon.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.sections", "content.code.copy", "content.action.view", "content.tabs.link", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.share", "search.suggest", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.081f42fc.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>